# å¸¸è§ç¼–ç¨‹æ¦‚å¿µ

æœ¬ç« æ¶µç›–äº†å‡ºç°åœ¨å‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€äº›æ¦‚å¿µï¼Œä»¥åŠè¿™äº›æ¦‚å¿µåœ¨ Rust ä¸­è¿ä½œæ–¹å¼ã€‚ä¼—å¤šç¼–ç¨‹è¯­è¨€ï¼Œåœ¨ä»–ä»¬å„è‡ªæ ¸å¿ƒï¼Œéƒ½æœ‰ç€è®¸å¤šå…±åŒçš„ä¸œè¥¿ã€‚å‡ºç°åœ¨æœ¬ç« ä¸­çš„è¿™äº›æ¦‚å¿µï¼Œæ²¡æœ‰ä¸€ä¸ªæ˜¯ Rust ç‹¬æœ‰çš„ï¼Œç„¶è€Œè¿™é‡Œæ˜¯è¦å°±ä»–ä»¬åœ¨ Rust è¯­å¢ƒä¸‹è¿›è¡Œè®¨è®ºï¼Œå¹¶å¯¹ä½¿ç”¨è¿™äº›æ¦‚å¿µçš„ç›¸å…³çº¦å®šè¿›è¡Œè§£é‡Šã€‚

å…·ä½“æ¥è®²ï¼Œæœ¬ç« å°†è¦æŒæ¡åˆ°å˜é‡ã€åŸºæœ¬ç±»å‹ã€å‡½æ•°ã€æ³¨é‡ŠåŠæ§åˆ¶æµç­‰æ¦‚å¿µã€‚è¿™äº›åŸºæœ¬æ¦‚å¿µå°†å‡ºç°åœ¨å…¨éƒ¨ Rust ç¨‹åºä¸­ï¼Œè€Œæ—©ç‚¹æŒæ¡ä»–ä»¬ï¼Œå°±ä¼šç»™åˆ°ä¸€ä¸ªå¼ºå¤§çš„æ ¸å¿ƒèµ·ç‚¹ã€‚

> **å…³é”®å­—ï¼ˆkeywordsï¼‰**
>
> Rust è¯­è¨€æœ‰ç€ä¸€å¥— *å…³é”®å­—*ï¼Œä»–ä»¬æ˜¯ä¿ç•™çš„ï¼Œä»…ç”±è¯­è¨€ä½¿ç”¨ï¼Œåœ¨è¿™ç‚¹ä¸Šä¸å…¶ä»–è¯­è¨€æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚ç‰¢è®°æ˜¯ä¸å¯ä»¥å°†è¿™äº›è¯æ±‡ï¼Œç”¨ä½œå˜é‡æˆ–å‡½æ•°çš„åç§°çš„ã€‚å¤šæ•°å…³é”®å­—éƒ½æœ‰ç€ç‰¹æ®Šæ„ä¹‰ï¼Œè€Œä¼šä½¿ç”¨ä»–ä»¬æ¥å®Œæˆ Rust ç¨‹åºä¸­ä¸åŒä»»åŠ¡ï¼›å…¶ä¸­æœ‰å°‘æ•°å‡ ä¸ªå½“å‰å¹¶æ²¡æœ‰å…³è”åŠŸèƒ½ï¼Œä»–ä»¬è¢«ä¿ç•™ç”¨äºæœªæ¥å°†æ·»åŠ åˆ° Rust çš„åŠŸèƒ½ã€‚åœ¨ [é™„å½• A](Ch99_Appendix_A.md) å°±èƒ½çœ‹åˆ°å…³é”®å­—æ¸…å•ã€‚


## å˜é‡ä¸å¯å˜æ€§

**Variables and Mutability**

å°±å¦‚åœ¨ä¹‹å‰çš„ ["ç”¨å˜é‡ä¿å­˜å€¼"](Ch02_Programming_a_Guessing_Game.md#storing-values-with-variables) å°èŠ‚ä¸­æ‰€è®²çš„é‚£æ ·ï¼Œé»˜è®¤å˜é‡æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ˜¯ Rust æ‰€æä¾›çš„ï¼Œæ¨åŠ¨åˆ©ç”¨ Rust èµ‹äºˆçš„å®‰å…¨å’Œæ˜“äºå¹¶å‘ä»£ç ç¼–å†™æ–¹å¼çš„ä¼—å¤šæªæ–½ä¹‹ä¸€ï¼ˆby default variables are immutable, this is one of many nudges Rust gives you to write your code in a way that takes advantage of the safety and easy concurrency that Rust offersï¼‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿˜æ˜¯æœ‰å°†å˜é‡ä½œä¸ºå¯å˜çš„é€‰é¡¹ã€‚ä¸‹é¢å°±æ¥ææ¸…æ¥šï¼Œä¸ºä½• Rust ä¼šé¼“åŠ±åå‘ä¸å¯å˜ï¼Œä»¥åŠä¸ºä½•æœ‰æ—¶ä¼šå¸Œæœ›ä¸æ¥å— Rust çš„å»ºè®®ã€‚

åœ¨å˜é‡ä¸ºä¸å¯å˜æ—¶ï¼Œä¸€æ—¦å€¼è¢«ç»‘å®šåˆ°æŸä¸ªåå­—ï¼Œé‚£ä¹ˆå°±æ— æ³•ä¿®æ”¹é‚£ä¸ªå€¼äº†ã€‚ä¸ºå¯¹æ­¤è¿›è¡Œæ¼”ç¤ºï¼Œå°±æ¥é€šè¿‡ä½¿ç”¨ `cargo new variables` åœ¨ `projects` ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªæ–°çš„åä¸º `variables` çš„é¡¹ç›®ã€‚

ç„¶åï¼Œåœ¨é‚£ä¸ªæ–°çš„ `variables` ç›®å½•ä¸­ï¼Œæ‰“å¼€ `src/main.rs` å¹¶å°†å…¶ä»£ç æ›¿æ¢ä¸ºä¸‹é¢çš„ä»£ç ã€‚æ­¤ä»£ç å½“ç„¶ä¸ä¼šè¢«ç¼–è¯‘ï¼Œè¿™é‡Œé¦–å…ˆè¦å¯¹ä¸å¯å˜é”™è¯¯åŠ ä»¥æ£€è§†ã€‚

```rust
fn main() {
    let x = 5;
    println! ("x çš„å€¼ä¸ºï¼š{}", x);

    x = 6;
    println! ("x çš„å€¼ä¸ºï¼š{}", x);
}
```

ä¿å­˜å¹¶ä½¿ç”¨ `cargo run` è¿è¡Œè¿™ä¸ªç¨‹åºã€‚å°±ä¼šå—åˆ°é”™è¯¯æ¶ˆæ¯ï¼Œå¦‚ä¸‹é¢è¿™ä¸ªè¾“å‡ºï¼š

```console
$ cargo run                                                   î‚² âœ” 
   Compiling variables v0.1.0 (/home/peng/rust-lang/projects/variables)
error[E0384]: cannot assign twice to immutable variable `x`
 --> src/main.rs:5:5
  |
2 |     let x = 5;
  |         -
  |         |
  |         first assignment to `x`
  |         help: consider making this binding mutable: `mut x`
...
5 |     x = 6;
  |     ^^^^^ cannot assign twice to immutable variable

For more information about this error, try `rustc --explain E0384`.
error: could not compile `variables` due to previous error
```

æ­¤ç¤ºä¾‹æ˜¾ç¤ºäº†ç¼–è¯‘å™¨å¦‚ä½•å¸®åŠ©å‘ç°ç¨‹åºä¸­çš„é”™è¯¯ã€‚ç¼–è¯‘å™¨é”™è¯¯å¯èƒ½ä»¤äººæ²®ä¸§ï¼Œä½†è¿™äº›ç¼–è¯‘å™¨é”™è¯¯çœŸçš„æ„å‘³ç€ï¼Œç¨‹åºæœªæœ‰å®‰å…¨åœ°æ‰§è¡Œè¦ç¨‹åºåšçš„äº‹æƒ…ï¼›ç¼–è¯‘å™¨é”™è¯¯å¹¶ä¸è¡¨ç¤ºä½ ä¸æ˜¯ä¸€åè‰¯å¥½çš„ç¨‹åºå‘˜ï¼å³ä½¿é‚£äº›ç»éªŒä¸°å¯Œçš„ Rust å…¬æ°‘ï¼Œä¹Ÿä¼šæ”¶åˆ°ç¼–è¯‘å™¨é”™è¯¯ã€‚

è¯¥é”™è¯¯æ¶ˆæ¯è¡¨ç¤ºé”™è¯¯åŸå› ä¸º `cannot assing twice to immutable variable 'x'`ï¼Œæ˜¯å› ä¸ºæœ‰å°è¯•å°†ç¬¬äºŒä¸ªå€¼èµ‹ç»™é‚£ä¸ªä¸å¯å˜çš„ `x` å˜é‡ã€‚

åœ¨å°è¯•ä¿®æ”¹æŸä¸ªè¢«æŒ‡å®šä¸ºä¸å¯å˜çš„å€¼æ—¶ï¼Œç”±äºè¿™ç§æƒ…å†µä¼šå¯¼è‡´ç¨‹åºé”™è¯¯ï¼Œå› æ­¤è¿™ä¸ªæ—¶å€™æ”¶åˆ°ç¼–è¯‘æ—¶é”™è¯¯å°¤ä¸ºé‡è¦ã€‚ä»£ç ä¸€éƒ¨åˆ†çš„è¿ä½œï¼Œæ˜¯å»ºç«‹åœ¨å€¼å°†ç»ä¸ä¼šæ”¹å˜è¿™ç§å‡å®šä¸Šï¼Œè€Œä»£ç å¦ä¸€éƒ¨åˆ†å´ä¿®æ”¹äº†é‚£ä¸ªå€¼ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½ä»£ç çš„ç¬¬ä¸€éƒ¨åˆ†æœªæœ‰å®Œæˆä»–é¢„è®¡è¦å®Œæˆçš„å·¥ä½œäº†ã€‚æ­¤ç±»ç¨‹åºé”™è¯¯çš„åŸå› ï¼Œå°±éš¾äºè¿½è¸ªåˆ°çœŸç›¸ï¼Œå°¤å…¶æ˜¯åœ¨ä»£ç ç¬¬äºŒéƒ¨åˆ†ä»… *æœ‰çš„æ—¶å€™* æ‰å¯¹é‚£ä¸ªå€¼è¿›è¡Œä¿®æ”¹æ—¶ã€‚Rust ç¼–è¯‘å™¨ä¿è¯äº†åœ¨è¡¨æ˜æŸä¸ªå€¼ä¸ä¼šå˜åŒ–æ—¶ï¼Œé‚£ä¹ˆé‚£ä¸ªå€¼å°±çœŸçš„ä¸ä¼šå˜åŒ–ï¼Œå¦‚æ­¤å°±ä¸å¿…äº²è‡ªå»ç´§ç›¯ç€é‚£ä¸ªå˜é‡äº†ã€‚ä»£ç ä¹Ÿç”±æ­¤è€Œæ›´æ˜“äºæ¨æ¼”ã€‚

ç„¶è€Œå¯å˜åˆ™å¯èƒ½ä¼šéå¸¸æœ‰ç”¨ï¼Œå¹¶èƒ½ä»¤åˆ°ä»£ç æ›´ä¾¿äºç¼–å†™ã€‚å˜é‡ä»…åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¯å˜çš„ï¼›å°±å¦‚åŒåœ¨ç¬¬ 2 ç« ä¸­æ‰€åšçš„é‚£æ ·ï¼Œå¯é€šè¿‡åœ¨å˜é‡åå­—å‰æ·»åŠ  `mut` å…³é”®å­—ï¼Œè®©å˜é‡æˆä¸ºå¯å˜ã€‚`mut` çš„æ·»åŠ ï¼Œä¹Ÿå‘å°†æ¥ä»£ç çš„è¯»è€…ä¼ è¾¾äº†æŸç§æ„å›¾ï¼Œè¡¨ç¤ºä»£ç çš„å…¶ä»–éƒ¨åˆ†ï¼Œä¼šå¯¹è¿™ä¸ªå˜é‡çš„å€¼è¿›è¡Œä¿®æ”¹ã€‚

æ¯”å¦‚ï¼Œæ¥å°† `src/main.rs` ä¿®æ”¹ä¸ºä¸‹é¢è¿™æ ·ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let mut x = 5;
    println! ("x çš„å€¼ä¸ºï¼š{}", x);

    x = 6;
    println! ("x çš„å€¼ä¸ºï¼š{}", x);
}
```

åœ¨æ­¤æ—¶è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼Œå°±ä¼šå¾—åˆ°è¿™æ ·çš„è¾“å‡ºï¼š

```rust
$ cargo run                                                      î‚² 101 âœ˜ 
   Compiling variables v0.1.0 (/home/peng/rust-lang/projects/variables)
    Finished dev [unoptimized + debuginfo] target(s) in 0.46s
     Running `target/debug/variables`
x çš„å€¼ä¸ºï¼š5
x çš„å€¼ä¸ºï¼š6
```

åœ¨ä½¿ç”¨äº† `mut` å…³é”®å­—æ—¶ï¼Œå°±è¢«å…è®¸å°†ç»‘å®šåˆ° `x` çš„å€¼ä» `5` ä¿®æ”¹åˆ° `6` äº†ã€‚é™¤äº†é˜²æ­¢ç¨‹åºé”™è¯¯ä¹‹å¤–ï¼Œè¿˜è¦è€ƒè™‘å¤šç§æƒè¡¡ã€‚æ¯”å¦‚ï¼Œåœ¨ä½¿ç”¨ç€å¤§å‹æ•°æ®ç»“æ„æ—¶ï¼Œå°±åœ°ä¿®æ”¹å…¶çš„ä¸€ä¸ªå®ä¾‹ï¼Œå°±ä¼šæ¯”æ‹·è´å¹¶è¿”å›æ–°è¿‘åˆ†é…çš„å®ä¾‹è¦å¿«ä¸€äº›ï¼ˆfor example, in cases where you're using large data structures, mutating an instance in place may be faster than copying and returning newly allocated instancesï¼‰ã€‚è€Œå¯¹äºè¾ƒå°çš„æ•°æ®ç»“æ„ï¼Œåˆ›å»ºå…¶æ–°å®ä¾‹ï¼Œå¹¶ä»¥æ›´å…·å‡½æ•°å¼ç¼–ç¨‹é£æ ¼æ¥ç¼–å†™ä»£ç ï¼Œåˆ™å¯èƒ½æ›´æ˜“äºç†è§£ï¼Œé‚£ä¹ˆç”±æ­¤å¸¦æ¥çš„æ€§èƒ½ä¸‹é™ï¼Œç›¸å¯¹æ‰€å–å¾—çš„æ€è·¯æ¸…æ™°ï¼Œä¹Ÿä¼šæ˜¯å€¼å¾—çš„ã€‚

## å¸¸é‡

ä¸ä¸å¯å˜å˜é‡ç±»ä¼¼ï¼Œ *å¸¸é‡ï¼ˆconstantsï¼‰* æ˜¯ä¸€äº›ç»‘å®šåˆ°åå­—ä¸”ä¸å…è®¸ä¿®æ”¹çš„å€¼ï¼Œä½†å¸¸é‡ä¸å˜é‡ä¹‹é—´ï¼Œæœ‰äº›å·®å¼‚ã€‚

é¦–å…ˆï¼Œæ˜¯ä¸å…è®¸åœ¨å¸¸é‡ä¸Šä½¿ç”¨ `mut` å…³é”®å­—çš„ã€‚å¸¸é‡ä¸å…‰æ˜¯é»˜è®¤ä¸å¯å˜çš„ -- ä»–ä»¬ä¸€ç›´éƒ½æ˜¯ä¸å¯å˜çš„ã€‚å¸¸é‡çš„å£°æ˜ç”¨çš„æ˜¯ `const` å…³é”®å­—ï¼Œè€Œä¸æ˜¯ `let` å…³é”®å­—ï¼ŒåŒæ—¶å€¼çš„ç±»å‹ *å¿…é¡»* è¢«æ³¨è§£ï¼ˆbe annotatedï¼‰ã€‚åœ¨ä¸‹ä¸€å°èŠ‚ï¼Œ[æ•°æ®ç±»å‹](#data-types)ï¼Œå°±ä¼šè®²åˆ°ç±»å‹å’Œç±»å‹æ³¨è§£äº†ï¼Œå› æ­¤ç°åœ¨ä¸è¦å…³å¿ƒç»†èŠ‚ã€‚åªè¦æ˜ç™½å¿…é¡»å§‹ç»ˆå¯¹ç±»å‹è¿›è¡Œæ³¨è§£ã€‚

å¯åœ¨ä»»ä½•ä½œç”¨åŸŸï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜å¸¸é‡ã€‚è€Œå½“åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜å¸¸é‡æ—¶ï¼Œåˆ™ä¼šè®©é‚£äº›ä»£ç ä¸­è®¸å¤šéƒ¨åˆ†éƒ½éœ€è¦çŸ¥æ‚‰çš„å€¼çš„å¸¸é‡ï¼Œå˜å¾—æœ‰ç”¨èµ·æ¥ã€‚

å¸¸é‡ä¸ä¸å¯å˜å˜é‡çš„æœ€åä¸€ä¸ªåŒºåˆ«ï¼Œå°±æ˜¯å¸¸é‡åªèƒ½è¢«è®¾ç½®åˆ°ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œä¸èƒ½è¢«è®¾ç½®ä¸ºåªèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—å‡ºç»“æœçš„å€¼ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸é‡å£°æ˜çš„ç¤ºä¾‹ï¼š

```rust
const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
```

è¯¥å¸¸é‡çš„åå­—ä¸º `THREE_HOURS_IN_SECONDS`ï¼Œè€Œä»–çš„å€¼å°±è¢«è®¾ç½®ä¸ºäº† `60` ï¼ˆå³ä¸€åˆ†é’Ÿçš„ç§’æ•°ï¼‰ä¹˜ä»¥ `60` ï¼ˆå³ä¸€å°æ—¶çš„åˆ†é’Ÿæ•°ï¼‰ä¹˜ä»¥ `3` ï¼ˆæ­¤ç¨‹åºä¸­è¦è®¡æ•°çš„å°æ—¶æ•°ï¼‰ã€‚Rust å…³äºå¸¸é‡å‘½åçš„çº¦å®šï¼Œå³ä¸ºå…¨éƒ¨ä½¿ç”¨å¤§å†™ï¼Œåœ¨è¯æ±‡ä¹‹é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€ã€‚ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶ï¼Œèƒ½å¤Ÿæ‰§è¡Œä¸€å¥—å—é™çš„è¿ç®—ï¼Œè¿™æ ·å°±å¯ä»¥é€‰æ‹©å°†å¸¸é‡å€¼ï¼Œä»¥è¿™ç§æ›´æ˜“äºç†è§£å’ŒéªŒè¯çš„æ–¹å¼å†™å‡ºæ¥ï¼Œè€Œä¸æ˜¯å°†è¯¥å¸¸é‡è®¾ç½®ä¸ºå€¼ `10,800`ã€‚è¯·å‚é˜… [Rust å‚è€ƒæ‰‹å†Œæœ‰å…³å¸¸é‡æ±‚å€¼çš„å°èŠ‚](https://doc.rust-lang.org/reference/const_eval.html)ï¼Œäº†è§£æ›´å¤šæœ‰å…³åœ¨å£°æ˜å¸¸é‡æ—¶å¯ä½¿ç”¨é‚£äº›è¿ç®—çš„ä¿¡æ¯ã€‚

å¸¸é‡åœ¨ç¨‹åºè¿è¡Œçš„å…¨éƒ¨æ—¶é—´ã€åœ¨å…¶è¢«å£°æ˜çš„ä½œç”¨åŸŸå†…éƒ¨ï¼Œéƒ½æ˜¯æœ‰æ•ˆçš„ã€‚å¸¸é‡çš„è¿™ä¸ªå±æ€§ï¼Œä»¤åˆ°å¸¸é‡å¯¹äºåº”ç”¨åŸŸå†…çš„é‚£äº›ã€ç¨‹åºå¤šä¸ªéƒ¨åˆ†éƒ½éœ€è¦çŸ¥æ‚‰çš„å€¼æ¥è¯´ï¼Œå˜å¾—æœ‰ç”¨èµ·æ¥ï¼Œæ¯”å¦‚æŸä¸ªæ¸¸æˆå…¨éƒ¨ç©å®¶æ‰€å…è®¸èµšåˆ°çš„æœ€å¤§ç‚¹æ•°ï¼Œæˆ–å…‰é€Ÿå¸¸é‡ã€‚

å¯¹é‚£äº›æ•´ä¸ªç¨‹åºéƒ½è¦ç”¨åˆ°çš„ã€ä½œä¸ºå¸¸é‡çš„ç¡¬ç¼–ç å€¼è¿›è¡Œå–åï¼Œå¯¹äºå‘ä»£ç å°†æ¥çš„ç»´æŠ¤è€…ä»¬ä¼ è¾¾é‚£äº›å€¼çš„æ„ä¹‰ï¼Œæ˜¯ç›¸å½“æœ‰ç”¨çš„ã€‚å¯¹äºæœªæ¥éœ€è¦æ›´æ–°ç¡¬ç¼–ç å€¼æ¥è¯´ï¼Œå¯¹å¸¸é‡å‘½åå°±è®©é‚£äº›éœ€è¦ä¿®æ”¹çš„ä»£ç åªæœ‰ä¸€å¤„è¦æ”¹ï¼Œè€Œå¯¹æ­¤å¸¦æ¥å¸®åŠ©ã€‚

## é®è”½ï¼ˆshadowingï¼‰

å¦‚åŒåœ¨ç¬¬ 2 ç« ä¸­çš„çŒœæ•°æ¸¸æˆé‡Œçœ‹åˆ°çš„é‚£æ ·ï¼Œå¯å£°æ˜ä¸€ä¸ªä¸å…ˆå‰å˜é‡åŒåçš„æ–°å˜é‡ã€‚Rust å…¬æ°‘ä»¬è¡¨ç¤ºï¼Œé‚£ç¬¬ä¸€ä¸ªå˜é‡æ˜¯è¢«ç¬¬äºŒä¸ªç»™ *é®è”½* æ‰äº†ï¼Œè¿™å°±æ„å‘³ç€åœ¨ç”¨åˆ°è¿™ä¸ªå˜é‡æ˜¯ï¼Œç¨‹åºæ‰€çœ‹åˆ°çš„ï¼Œä¼šæ˜¯ç¬¬äºŒä¸ªå˜é‡çš„å€¼ã€‚é€šè¿‡ä½¿ç”¨ä¸€æ ·çš„å˜é‡åå­—ï¼Œä»¥åŠé‡å¤ä½¿ç”¨ `let` å…³é”®å­—ï¼Œå°±å¯å¯¹æŸä¸ªå˜é‡è¿›è¡Œé®è”½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let x = 5;

    let x = x + 1;

    {
        let x = x * 2;
        println! ("å†…éƒ¨ä½œç”¨åŸŸä¸­ x çš„å€¼ä¸ºï¼š{}", x);
    }

    println! ("x çš„å€¼ä¸ºï¼š{}", x);
}
```

```console
å†…éƒ¨ä½œç”¨åŸŸä¸­ x çš„å€¼ä¸ºï¼š12
x çš„å€¼ä¸ºï¼š6
```

> æ³¨æ„ï¼šé®è”½ç‰¹æ€§çš„ä½¿ç”¨ï¼Œä¸éœ€è¦ `mut` å…³é”®å­—ã€‚

è¿™ä¸ªç¨‹åºé¦–å…ˆå°† `x` ç»‘å®šåˆ°å€¼ `5`ã€‚éšåé€šè¿‡é‡å¤ `let x =`ï¼Œå–åŸæ¥çš„å€¼å¹¶åŠ ä¸Š `1`ï¼Œè€Œå¯¹ `x` åšäº†é®è”½æ“ä½œï¼Œå› æ­¤ `x` çš„å€¼æ­¤æ—¶å°±ä¸º `6` äº†ã€‚ä¹‹åï¼Œåœ¨ä¸€ä¸ªå†…éƒ¨ä½œç”¨åŸŸå†…ï¼Œç¬¬ä¸‰ä¸ª `let` è¯­å¥ä¹Ÿå¯¹ `x` è¿›è¡Œäº†é®è”½ï¼Œå°†å…ˆå‰çš„å€¼ä¹˜ä»¥ `2`ï¼Œå°±ç»™åˆ° `x` ä¸€ä¸ªå€¼ `12`ã€‚åœ¨é‚£ä¸ªå†…éƒ¨ä½œç”¨åŸŸå®Œæ¯•æ—¶ï¼Œé‚£ä¸ªå†…éƒ¨é®è”½å°±ç»“æŸäº†ï¼ŒåŒæ—¶ `x` å›åˆ°ä»ä¸º `6`ã€‚åœ¨è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼Œä»–å°†è¾“å‡ºä¸‹é¢çš„å†…å®¹ï¼š


```console
$ cargo run                                                       î‚² âœ” 
   Compiling variables v0.1.0 (/home/peng/rust-lang/projects/variables)
    Finished dev [unoptimized + debuginfo] target(s) in 0.47s
     Running `target/debug/variables`
å†…éƒ¨ä½œç”¨åŸŸä¸­ x çš„å€¼ä¸ºï¼š12
x çš„å€¼ä¸ºï¼š6
```

ç”±äºåœ¨ä¸å°å¿ƒè€Œå°è¯•åœ¨ä¸å¸¦ `let` å…³é”®å­—è€Œé‡æ–°èµ‹å€¼ç»™è¯¥å˜é‡æ—¶ï¼Œä¼šæ”¶åˆ°ç¼–è¯‘æ—¶é”™è¯¯ï¼Œå› æ­¤é®è”½ä¸åŒäºæ„é€ ä¸€ä¸ª`mut` çš„å˜é‡ã€‚é€šè¿‡ä½¿ç”¨ `let` å…³é”®å­—ï¼Œå°±å¯ä»¥åœ¨å€¼ä¸Šæ‰§è¡Œå°‘é‡çš„è½¬æ¢æ“ä½œï¼Œè€Œåœ¨è¿™äº›è½¬æ¢æ“ä½œå®Œæˆååˆå°†è¯¥å˜é‡ç½®å…¥åˆ°ä¸å¯å˜ã€‚

`mut` ä¸é®è”½çš„å¦ä¸€ä¸åŒä¹‹å¤„ï¼Œåˆ™æ˜¯ç”±äºå†æ¬¡ä½¿ç”¨`let`å…³é”®å­—æ—¶ï¼Œæœ‰æ•ˆåœ°åˆ›å»ºå‡ºäº†ä¸€ä¸ªæ–°å˜é‡ï¼Œå› æ­¤å°±å¯ä»¥æ”¹å˜é‚£ä¸ªå€¼çš„ç±»å‹ï¼Œè€Œä»ç„¶é‡ç”¨é‚£åŒæ ·çš„å˜é‡åå­—ã€‚æ¯”å¦‚è¯´ç¨‹åºè¦é€šè¿‡ç”¨æˆ·è¾“å…¥è‹¥å¹²ç©ºæ ¼å­—ç¬¦ï¼Œæ¥è¯¢é—®ç”¨æˆ·å¸Œæœ›åœ¨ä¸€äº›æ–‡æœ¬ä¹‹é—´ç•™å¤šå°‘ä¸ªç©ºæ ¼ï¼Œè€Œæ­¤æ—¶åˆè¦å°†ç”¨æˆ·è¾“å…¥çš„è‹¥å¹²ä¸ªç©ºæ ¼ï¼Œä¿å­˜ä¸ºä¸€ä¸ªæ•°å­—ï¼š

```rust
let spaces = "    ";
let spaces = spaces.len();
```

ç¬¬ä¸€ä¸ª `spaces` å˜é‡æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè€Œç¬¬äºŒä¸ª `spaces` å˜é‡åˆ™æ˜¯æ•°å­—ç±»å‹ã€‚é®è”½å› æ­¤è€Œå…äºä¸å¾—ä¸è‹¦è‹¦æ€ç´¢ä¸åŒçš„å˜é‡åå­—ï¼Œè¯¸å¦‚ `spaces_str` åŠ `spaces_num`ï¼›ç›¸åï¼Œæ˜¯å¯ä»¥é‡æ–°è¾ƒç®€å•çš„ `spaces` åç§°ã€‚ç„¶è€Œï¼Œè‹¥å°è¯•å¯¹è¿™ä¸ªå˜é‡ä½¿ç”¨ `mut` å…³é”®å­—ï¼Œå°±ä¼šæ”¶åˆ°ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
let mut spaces = "    ";
spaces = spaces.len();
```

é”™è¯¯æ˜¯è¯´ä¸å…è®¸è½¬å˜å˜é‡ç±»å‹ï¼š

```console
$ cargo run                                                       î‚² âœ” 
   Compiling variables v0.1.0 (/home/peng/rust-lang/projects/variables)
error[E0308]: mismatched types
  --> src/main.rs:14:14
   |
13 |     let mut spaces = "    ";
   |                      ------ expected due to this value
14 |     spaces = spaces.len();
   |              ^^^^^^^^^^^^ expected `&str`, found `usize`

For more information about this error, try `rustc --explain E0308`.
error: could not compile `variables` due to previous error
```

ç°åœ¨å·²ç»å®Œæˆå˜é‡è¿è¡Œæœºåˆ¶çš„æ¢è®¨ï¼Œæ¥å¸æ¥å°±è¦çœ‹çœ‹è¿™äº›å˜é‡å¯ä»¥æœ‰çš„é‚£äº›å…¶ä½™æ•°æ®ç±»å‹äº†ã€‚


## æ•°æ®ç±»å‹

Rust çš„æ‰€æœ‰å€¼ï¼Œéƒ½å±äºæŸç§ç¡®åˆ‡çš„ *æ•°æ®ç±»å‹ï¼ˆdata typeï¼‰*ï¼Œæ•°æ®ç±»å‹å‘Šè¯‰ Rust æ‰€æŒ‡å®šçš„æ˜¯ä½•ç§æ•°æ®ï¼Œè¿›è€Œ Rust æ‰çŸ¥é“è¯¥æ€æ ·ä½¿ç”¨é‚£ä¸ªæ•°æ®ã€‚æ¥ä¸‹æ¥ä¼šçœ‹çœ‹ä¸¤ä¸ªæ•°æ®ç±»å‹çš„å­é›†ï¼šæ ‡é‡ï¼ˆscalarï¼‰ç±»å‹ä¸å¤åˆï¼ˆcompoundï¼‰ç±»å‹ã€‚

è¯·ç‰¢è®° Rust æ˜¯é—¨ *é™æ€ç±»å‹ï¼ˆstatically typedï¼‰* è¯­è¨€ï¼Œè¿™å°±æ„å‘³ç€åœ¨è¿è¡Œæ—¶ï¼Œä»–å¿…é¡»æ¸…æ¥šæ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚åŸºäºå€¼ä¸å¯¹å˜é‡çš„ä½¿ç”¨æ–¹å¼ï¼Œç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æ¨æ–­å‡ºå¸Œæœ›å˜é‡ä½¿ç”¨ä½•ç§ç±»å‹æ¥ã€‚åœ¨å¯èƒ½æœ‰è®¸å¤šä¸­ç±»å‹çš„æƒ…å†µä¸‹ï¼Œå°±å¦‚åŒç¬¬ 2 ç«  [å°†çŒœæ•°ä¸ç§˜å¯†æ•°å­—æ¯”è¾ƒ](Ch02_Programming_a_Guessing_Game.md#compring-the-guess-to-the-secret-number) å°èŠ‚ä¸­ï¼Œä½¿ç”¨ `parse` æŠŠä¸€ä¸ª `String` è½¬æ¢æˆæ•°å­—ç±»å‹æ—¶ï¼Œå°±å¿…é¡»æ·»åŠ ä¸€ä¸ªç±»å‹æ³¨é‡Šï¼Œå¦‚ä¸‹é¢è¿™æ ·ï¼š

```rust
let guess: u32 = "42".parse().expect("è¿™ä¸æ˜¯ä¸ªæ•°å­—ï¼");
```

è‹¥è¿™é‡Œæ·»åŠ ç±»å‹æ³¨è§£ï¼Œé‚£ä¹ˆ Rust å°±ä¼šç»™å‡ºä¸‹é¢çš„é”™è¯¯ï¼Œè¡¨ç¤ºç¼–è¯‘å™¨éœ€è¦æ›´å¤šä¿¡æ¯æ¥æ˜ç™½è¿™é‡Œæƒ³è¦ä½¿ç”¨ä½•ç§ç±»å‹ï¼š

```console
$ cargo build                                                 î‚² 101 âœ˜ 
   Compiling variables v0.1.0 (/home/peng/rust-lang/projects/variables)
error[E0282]: type annotations needed
  --> src/main.rs:19:9
   |
19 |     let guess = "42".parse().expect("é‚£ä¸æ˜¯ä¸ªæ•°å­—ï¼");
   |         ^^^^^ consider giving `guess` a type

For more information about this error, try `rustc --explain E0282`.
error: could not compile `variables` due to previous error
```

æ¥ä¸‹æ¥å°±ä¼šè§è¯†åˆ°å…¶ä»–æ•°æ®ç±»å‹çš„ç±»å‹æ³¨è§£ã€‚


## æ ‡é‡ç±»å‹ï¼ˆScalar Typesï¼‰

*æ ‡é‡* ç±»å‹ï¼Œè¡¨ç¤ºå•ä¸ªå€¼ã€‚Rust æœ‰ç€å››ä¸ªä¸»è¦çš„æ ‡é‡ç±»å‹ï¼šæ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ä¸å­—ç¬¦ã€‚è¿™äº›ç±»å‹ï¼Œå…¶ä»–è¯­è¨€ä¹Ÿæœ‰ã€‚ä¸‹é¢å°±æ·±å…¥çœ‹çœ‹ä»–ä»¬åœ¨ Rust ä¸­æ˜¯æ€æ ·å·¥ä½œçš„ã€‚

### æ•´å½¢ï¼ˆInteger Typesï¼‰

*æ•´æ•°* æ˜¯ä¸å¸¦å°æ•°éƒ¨åˆ†çš„æ•°ã€‚åœ¨ç¬¬ 2 ç« ä¸­å°±å·²ç”¨åˆ°ä¸€ç§æ•´æ•°ç±»å‹ï¼Œå³ `u32` ç±»å‹ã€‚è¿™ç§ç±»å‹å£°æ˜è¡¨ç¤ºå˜é‡å…³è”çš„å€¼ï¼Œåº”æ˜¯ä¸ªæ— ç¬¦å·çš„ã€å æ® 32 ä¸ªäºŒè¿›åˆ¶ä½ç©ºé—´çš„æ•´æ•°ï¼ˆæœ‰ç¬¦å·æ•´æ•°ä»¥ `i` è€Œä¸æ˜¯ `u` å¼€å¤´ï¼‰ã€‚ä¸‹é¢çš„è¡¨ 3-1 ç»™å‡ºäº† Rust ä¸­å†…å»ºçš„é‚£äº›æ•´æ•°ç±»å‹ã€‚å¯ä½¿ç”¨è¿™äº›å˜ç§ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå–å£°æ˜å‡ºæŸä¸ªæ•´æ•°å€¼çš„ç±»å‹ã€‚

*è¡¨ 3-1ï¼šRust ä¸­çš„æ•´æ•°ç±»å‹*


| é•¿åº¦ | æœ‰ç¬¦å· | æ— ç¬¦å· |
| :-: | :- | :- |
| 8 ä½ | `i8` | `u8` |
| 16 ä½ | `i16` | `u16` |
| 32 ä½ | `i32` | `u32` |
| 64 ä½ | `i64` | `u64` |
| 128 ä½ | `i128` | `u128` |
| æ¶æ„å†³å®š | `isize` | `usize` |

è¿™æ¯ä¸ªå˜ç§ï¼Œéƒ½å¯ä»¥æ˜¯æœ‰ç¬¦å·æˆ–æ— ç¬¦å·çš„ï¼ŒåŒæ—¶æœ‰ç€æ˜¾å¼çš„å¤§å°ï¼ˆäºŒè¿›åˆ¶ä½æ•°ï¼‰ã€‚ *æœ‰ç¬¦å·* ä¸ *æ— ç¬¦å·* æ˜¯è¯¥æ•°å­—æ˜¯å¦å¯ä»¥æ˜¯è´Ÿæ•°--ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ•°æ˜¯å¦éœ€å¸¦æœ‰ç¬¦å·ï¼ˆå³æœ‰ç¬¦å·çš„ï¼‰ï¼Œæˆ–è€…è¯´ä»–æ˜¯å¦å°†åªä¸ºæ­£æ•°ï¼Œè€Œå› æ­¤ä»…èƒ½è¢«ä¸å¸¦ç¬¦å·çš„è¡¨ç¤ºå‡ºæ¥ï¼ˆå³æ— ç¬¦å·ï¼‰ã€‚è¿™ä¸åœ¨çº¸ä¸Šå†™æ•°å­—ç›¸åƒï¼šåœ¨ç¬¦å·é‡è¦æ—¶ï¼Œé‚£ä¹ˆå†™ä¸‹æ¥çš„æ•°å­—å°±ä¼šå¸¦æœ‰åŠ å·æˆ–å‡å·ï¼›ä¸è¿‡åœ¨å¯å®‰å…¨åœ°å‡å®šæ•°å­—ä¸ºæ­£æ•°æ—¶ï¼Œå†™ä¸‹çš„æ•°å­—å°±ä¸å¸¦ç¬¦å·äº†ã€‚æœ‰ç¬¦å·æ•°å­—ï¼Œæ˜¯é‡‡ç”¨ [äºŒè¿›åˆ¶è¡¥ç ](https://en.wikipedia.org/wiki/Two%27s_complement) è¡¨ç¤ºæ³•åŠ ä»¥å­˜å‚¨çš„ã€‚

æ¯ä¸ªæœ‰ç¬¦å·å˜ç§ï¼Œéƒ½å¯å­˜å‚¨è‡ª `-(2^n-1)` åˆ° `2^n-1` èŒƒå›´çš„é‚£äº›æ•°å­—ï¼ˆåŒ…æ‹¬è¾¹ç•Œä¸Šçš„ä¸¤ä¸ªæ•°å­—ï¼‰ï¼Œå…¶ä¸­çš„ `n` å³ä¸ºå˜ç§ç”¨åˆ°çš„ä½æ•°ã€‚é‚£ä¹ˆä¸€ä¸ª `i8` å°±å¯ä»¥å­˜å‚¨ ä»`-(2^7)` åˆ° `2^7-1` çš„é‚£äº›æ•°å­—äº†ï¼Œç›¸å½“äº `-128` åˆ° `127`ã€‚

æ— ç¬¦å·å˜ç§åˆ™å¯ä»¥å­˜å‚¨ `0` åˆ° `2^n - 1` çš„æ•°å­—ï¼Œå› æ­¤ä¸€ä¸ª `u8` å¯ä»¥å­˜å‚¨ `0` åˆ° `2^8 - 1` çš„æ•°å­—ï¼Œç›¸å½“äº `0` åˆ° `255`ã€‚

æ­¤å¤–ï¼Œå…¶ä¸­çš„ `isize` ä¸ `usize` ç±»å‹ï¼Œå–å†³äºç¨‹åºæ‰€è¿è¡Œè®¡ç®—æœºçš„æ¶æ„ï¼Œè¿™åœ¨ä¸Šé¢çš„è¡¨æ ¼ä¸­ï¼Œæ˜¯ä»¥ `arch` è¡¨ç¤ºçš„ï¼šè‹¥åœ¨ `64-bit` æœºå™¨ä¸Šé‚£ä¹ˆå°±æ˜¯ 64 ä½ï¼Œè€Œè‹¥åœ¨ `32-bit` æœºå™¨ä¸Šï¼Œé‚£ä¹ˆå°±æ˜¯ 32 ä½ã€‚

å¯ä½¿ç”¨ä¸Šé¢è¡¨ 3-2 ä¸­çš„ä»»ä½•å½¢å¼ï¼Œæ¥ç¼–å†™æ•´æ•°å­—é¢å€¼ï¼ˆinteger literalsï¼‰ã€‚è¯·æ³¨æ„æ•°å­—å­—é¢å€¼æ˜¯å¯ä»¥å°†å¤šç§æ•°å­—ç±»å‹ï¼Œä½œä¸ºç±»å‹åç¼€ï¼ˆa type suffixï¼‰ï¼Œè€ŒæŒ‡å®šå‡ºè¯¥æ•°å­—çš„ç±»å‹çš„ï¼Œæ¯”å¦‚ `57u8`ã€‚æ•°å­—å­—é¢å€¼ä¸­è¿˜å¯ä»¥ä½¿ç”¨ `_` ä½œä¸ºè§†è§‰åˆ†éš”ç¬¦ï¼Œä»è€Œè®©æ•°å­—æ›´æ˜“äºé˜…è¯»ï¼Œæ¯”å¦‚ `1_234_456_789_012`ï¼Œè¿™ä¸æŒ‡æ˜ `123456789012` æœ‰ç€åŒæ ·çš„å€¼ã€‚

*è¡¨ 3-2ï¼šRust ä¸­çš„æ•°å­—å­—é¢å€¼*

| æ•°å­—å­—é¢å€¼ | ç¤ºä¾‹ |
| :- | :- |
| åè¿›åˆ¶ï¼ˆDecimalï¼‰ | `98_222` |
| åå…­è¿›åˆ¶ï¼ˆHexï¼‰ | `0xff` |
| å…«è¿›åˆ¶ï¼ˆOctalï¼‰ | `0o77` |
| äºŒè¿›åˆ¶ï¼ˆBinaryï¼‰ | `0b1111_0000` |
| å­—èŠ‚ï¼ˆä»…é™ `u8`ï¼ŒByte(`u8` only)ï¼‰ | `b'A'` |

é‚£ä¹ˆæ€æ ·çŸ¥é“ï¼Œè¯¥ç”¨ä½•ç§ç±»å‹çš„æ•´æ•°å‘¢ï¼Ÿåœ¨ä¸ç¡®å®šçš„æ—¶å€™ï¼Œä¸€èˆ¬æ¥è¯´ Rust é»˜è®¤çš„æ•´æ•°ç±»å‹ï¼Œå³æ˜¯ä¸é”™çš„å¼€åœºï¼šæ•´æ•°ç±»å‹é»˜è®¤ä¸º `i32`ã€‚è€Œè¦ç”¨åˆ° `isize` æˆ– `usize` çš„ä¸»è¦åœºåˆï¼Œåˆ™æ˜¯åœ¨å¯¹ä¸€äº›ç±»åˆ«çš„é›†åˆè¿›è¡Œç´¢å¼•çš„æ—¶å€™ï¼ˆthe primary situation in which you'd use `isize` or `usize` is when indexing some sort of collectionï¼‰ã€‚

> å…³äº **æ•´æ•°æº¢å‡º**
>
> æ¯”æ–¹è¯´æœ‰ä¸ªç±»å‹ä¸º `u8` çš„ã€å¯ä¿å­˜ `0` åˆ° `255` ä¹‹é—´å€¼çš„å˜é‡ã€‚åœ¨å°è¯•å°†è¯¥å˜é‡ä¿®æ”¹ä¸ºè¶…å‡ºé‚£ä¸ªèŒƒå›´çš„æŸä¸ªå€¼ï¼Œæ¯”å¦‚ `256` æ—¶ï¼Œå°±ä¼šå‘ç”Ÿ *æ•´å‹æº¢å‡ºï¼ˆinteger overflowï¼‰*ï¼Œè€Œæ•´å‹æº¢å‡ºåˆå¯å¯¼è‡´ä¸¤ç§è¡Œä¸ºä¹‹ä¸€ã€‚åœ¨ä»¥è°ƒè¯•æ¨¡å¼è¿›è¡Œç¨‹åºç¼–è¯‘æ—¶ï¼ŒRust å°±ä¼šåŒ…å«æ•´æ•°æº¢å‡ºçš„æ£€æŸ¥ï¼Œåœ¨å‘ç”Ÿäº†æ•´æ•°æº¢å‡ºæ—¶ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºè¿›å…¥ *é”™è¯¯ï¼ˆpanicï¼‰* çŠ¶æ€ã€‚å¯¹äºç¨‹åºå› é”™è¯¯è€Œé€€å‡ºæ‰§è¡Œè¿™ç§æƒ…å†µï¼ŒRust ä½¿ç”¨äº† çŒæ­»ï¼ˆpanikingï¼‰ è¿™ä¸ªè¯è¯­ï¼›åœ¨ç¬¬ 9 ç« ä¸­çš„ [å¸¦æœ‰ `panic!` å®çš„ä¸å¯æ¢å¤æ€§é”™è¯¯](Ch09_Error_Handling.md#unrecoverable-errors-with-panic) å°èŠ‚ï¼Œå°†æ›´æ·±å…¥åœ°è®¨è®ºåˆ°ç¨‹åºå› é”™è¯¯è€Œç»ˆæ­¢è¿è¡Œçš„æƒ…å†µã€‚
>
> åœ¨ä»¥ `--release` å¼€å…³è¿›è¡Œå‘å¸ƒæ¨¡å¼çš„ç¼–è¯‘æ—¶ï¼ŒRust å°±ä¸ä¼šåŒ…å«å¯¹å¼•èµ·ç¨‹åºç»ˆæ­¢è¿è¡Œçš„æ•´æ•°æº¢å‡ºçš„æ£€æŸ¥ã€‚è¿™æ—¶è‹¥å‘ç”Ÿäº†æº¢å‡ºï¼ŒRust å°±ä¼šæ‰§è¡Œ *äºŒè¿›åˆ¶è¡¥ç å°è£…ï¼ˆtwo's complement wrappingï¼‰*ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¯¹äºæ¯”é‚£ç§ç±»å‹èƒ½ä¿å­˜çš„æœ€å¤§å€¼è¿˜è¦å¤§çš„å€¼ï¼Œå°±ä¼šè¢«â€œå›å·ï¼ˆwrap aroundï¼‰â€åˆ°é‚£ç§ç±»å‹æ‰€èƒ½ä¿å­˜çš„æœ€å°å€¼ã€‚ä»¥ `u8` ä¸ºä¾‹ï¼Œå€¼ `256` å°±å˜æˆäº† `0`ï¼Œå€¼ `257` å°±å˜æˆäº† `1`ï¼Œå¦‚æ­¤ç­‰ç­‰ã€‚è¿™æ ·ç¨‹åºå°±ä¸ä¼šæ­»æ‰ï¼Œè€Œé‚£ä¸ªå˜é‡åˆ™ä¼šæœ‰ç€ä¸€ä¸ªæˆ–è®¸ä¸æ˜¯æ‰€æœŸæœ›çš„å€¼ã€‚å¯¹æ•´æ•°æº¢å‡ºçš„å›å·è¡Œä¸ºçš„ä¾èµ–ï¼Œè¢«è§†ä¸ºä¸€ç§é”™è¯¯ï¼ˆRelying on integer overflow's wrapping behavior is considered an errorï¼‰ã€‚
>
> è¦æ˜¾å¼åœ°å¤„ç†å¯èƒ½çš„æº¢å‡ºï¼Œå°±è¦ç”¨åˆ°æ ‡å‡†åº“ä¸ºåŸç”Ÿæ•°å­—ç±»å‹æ‰€æä¾›çš„ä»¥ä¸‹æ–¹æ³•æ—ï¼ˆthese families of methods provided by the standard library for primitive numeric typesï¼‰ï¼š
>
> - ä»¥ `wrapping_*` è¿™äº›æ–¹æ³•çš„æ‰€æœ‰æ¨¡å¼çš„å°è£…ï¼Œæ¯”å¦‚ `wrapping_add`ï¼ˆwrap in all modes with the `wrapping_*` methods, such as `wrapping_add`ï¼‰ï¼›
> - å­˜åœ¨ä»¥ `checked_*` æ–¹æ³•çš„æº¢å‡ºæ—¶ï¼Œè¿”å› `None` å€¼ï¼ˆreturn the `None` value if there is overflow with the `checked_*` methodsï¼‰ï¼›
> - è¿”å›è¯¥å€¼ï¼Œä»¥åŠä¸€ä¸ªè¡¨ç¤ºæ˜¯å¦å­˜åœ¨å¸¦æœ‰ `overflowing_*` æ–¹æ³•çš„æº¢å‡ºçš„å¸ƒå°”å€¼ï¼ˆreturn the value and a boolean indicating whether there was overflow with the `overflow_*` methodsï¼‰ï¼›
> - ä»¥ `saturating_*` æ–¹æ³•ï¼Œå®ç°è¯¥å€¼çš„æœ€å°æˆ–æœ€å¤§å€¼å¤„é¥±å’Œï¼ˆsaturate at the value's minimum or maximum values with `saturating_*` methodsï¼‰ã€‚


### æµ®ç‚¹ç±»å‹

Rust åŒæ ·æœ‰ä¸¤ç§åŸç”Ÿçš„ *æµ®ç‚¹æ•°* ç±»å‹ï¼Œæ‰€è°“æµ®ç‚¹æ•°ï¼Œæ˜¯å¸¦æœ‰å°æ•°ç‚¹çš„æ•°å­—ã€‚Rust çš„æµ®ç‚¹æ•°ç±»å‹ä¸º `f32` ä¸ `f64`ï¼Œåˆ†åˆ«ä¸º 32 ä½åŠ 64 ä½å¤§å°ã€‚ç”±äºåœ¨ç°ä»£ CPU ä¸Š `f64` ä¸ `f32` å¤„ç†é€Ÿåº¦å¤§è‡´ä¸€æ ·ï¼Œä¸è¿‡å‰è€…å…·å¤‡äº†æ›´é«˜çš„ç²¾åº¦ï¼Œå› æ­¤é»˜è®¤ç±»å‹å°±å®šä¸ºäº† `f64`ã€‚ä¸¤ç§æµ®ç‚¹æ•°ç±»å‹éƒ½æ˜¯æœ‰ç¬¦å·çš„ã€‚

ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å…·ä½“çš„æµ®ç‚¹æ•°ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let x = 2.0;    // f64
    let y: f32 = 3.0;   // f32
}

æµ®ç‚¹æ•°çš„è¡¨ç¤ºï¼Œç¬¦åˆ [IEEE-754 æ ‡å‡†](https://standards.ieee.org/ieee/754/6210/)ã€‚`f32` ç±»å‹æ˜¯å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œè€Œ `f64` åˆ™æ˜¯åŒç²¾åº¦çš„ã€‚

### æ•°å­—è¿ç®—

Rust æ”¯æŒåœ¨æ‰€æœ‰æ•°å­—ç±»å‹ä¸Šã€æ‰€æœŸæœ›çš„é‚£äº›åŸºæœ¬æ•°å­¦è¿ç®—ï¼šåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•ï¼ŒåŠä½™æ•°ã€‚æ•´æ•°é™¤æ³•ä¼šå‘ä¸‹å–åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ç»“æœã€‚ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†åœ¨ `let` è¯­å¥ä¸­ï¼Œå¦‚ä½•è¿ç”¨å„ç§æ•°å­—è¿ç®—ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    
    // åŠ æ³•
    let sum = 5 + 10;

    // å‡æ³•
    let difference = 95.5 - 4.3;

    // ä¹˜æ³•
    let product = 4 * 30;

    // é™¤æ³•
    let quotient = 56.7 / 32.2;
    let floored = 2 / 3; // ç»“æœä¸º 0

    // ä½™æ•°
    let reminder = 43 % 5;

    println! ("
        5 + 10 = {}, 
        95.5 - 4.3 = {}
        4 * 30 = {}
        56.7 / 32.2 = {}
        2 / 3 = {}
        43 % 5 = {}", sum, difference, product, quotient, floored, reminder);
}
```

è¿™äº›è¯­å¥ä¸­æ¯ä¸ªè¡¨è¾¾å¼éƒ½ä½¿ç”¨äº†ä¸€ä¸ªæ•°å­¦è¿ç®—ç¬¦ï¼Œå¹¶æ±‚åˆ°ä¸€ä¸ªå•å€¼ï¼Œè¯¥å•å€¼éšåè¢«ç»‘å®šåˆ°å˜é‡ã€‚[é™„å½• B](Ch99_Operators.md) åŒ…å«äº† Rust æ‰€æä¾›çš„å…¨éƒ¨è¿ç®—ç¬¦ã€‚

### å¸ƒå°”å€¼ç±»å‹

ä¸å¤šæ•°å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ä¸€æ ·ï¼ŒRust ä¸­çš„å¸ƒå°”å€¼ç±»å‹ä¹Ÿæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š`true` åŠ `false`ã€‚å¸ƒå°”å€¼å¤§å°ä¸ºä¸€ä¸ªå­—èŠ‚ã€‚Rust ä¸­çš„å¸ƒå°”å€¼ç±»å‹ï¼ŒæŒ‡å®šä½¿ç”¨ `bool` å…³é”®å­—ã€‚æ¯”å¦‚ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let t = true;

    let f: bool = false; // å¸¦æœ‰æ˜¾å¼ç±»å‹æ³¨è§£
}
```

ä¸»è¦é€šè¿‡æ¡ä»¶åˆ¤æ–­ï¼Œæ¥ä½¿ç”¨å¸ƒå°”å€¼ï¼Œæ¯”å¦‚åœ¨ `if` è¡¨è¾¾å¼ä¸­ã€‚åœ¨ [æ§åˆ¶æµï¼ˆControl Flowï¼‰](#control-flow) å°èŠ‚ï¼Œä¼šè®²åˆ° Rust ä¸­ `if` è¡¨è¾¾å¼çš„å·¥ä½œæ–¹å¼ã€‚

#### å­—ç¬¦ç±»å‹

Rust çš„ `char` ç±»å‹ï¼Œæ˜¯è¿™é—¨è¯­è¨€æœ€ä¸ºåŸç”Ÿçš„å­—æ¯ç±»å‹ã€‚ä¸‹é¢å°±æ˜¯ä¸€äº›å£°æ˜ `char` å€¼çš„ç¤ºä¾‹ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ğŸ˜»';

    println! ("c ä¸º {}, z ä¸º {}, çˆ±å¿ƒçŒ«: {}", c, z, heart_eyed_cat);
}
```

è¯·æ³¨æ„ï¼Œç›¸æ¯”ä½¿ç”¨åŒå¼•å·æ¥ç»™å­—ç¬¦ä¸²å­—é¢å€¼è¿›è¡Œå€¼çš„æŒ‡å®šï¼Œè¿™é‡Œæ˜¯ä»¥å•å¼•å·æ¥å¯¹è¿™äº› `char` çš„å­—é¢å€¼è¿›è¡ŒæŒ‡å®šçš„ã€‚Rust çš„ `char` ç±»å‹ï¼Œæœ‰ç€å››ä¸ªå­—èŠ‚çš„å¤§å°ï¼Œè€Œè¡¨ç¤ºäº† Unicode çš„æ ‡é‡å€¼ï¼Œè¿™å°±æ„å‘³ç€ä»–å¯ä»¥è¡¨ç¤ºæ¯”ä»…ä»… ASCII è¦å¤šå¾—å¤šçš„ç¬¦å·ã€‚åƒæ˜¯é‡éŸ³å­—æ¯ï¼ˆaccented lettersï¼‰ï¼›ä¸­æ–‡ã€æ—¥è¯­ã€éŸ©è¯­ç­‰ç­‰ï¼›emoji ç¬¦å·ï¼›ä»¥åŠé‚£äº›é›¶å®½åº¦ç©ºæ ¼ç­‰ç­‰ï¼Œåœ¨ Rust ä¸­éƒ½æ˜¯æœ‰æ•ˆçš„ `char` å–å€¼ã€‚Unicode æ ‡é‡å€¼çš„èŒƒå›´ï¼Œæ˜¯ä» `U+0000` åˆ° `U+D7FF`ï¼ŒåŠ `U+E000` åˆ° `U+10FFFF`ï¼ŒåŒ…å«è¾¹ç•Œå€¼ã€‚ä¸è¿‡ï¼Œâ€œå­—ç¬¦ï¼ˆcharacterï¼‰â€ å¹¶é Unicode ä¸­çš„æ¦‚å¿µï¼Œå› æ­¤å¯¹ â€œå­—ç¬¦â€ ä¸ºä½•ç‰©çš„ä¸»è§‚è®¤è¯†ï¼Œå¯èƒ½ä¸ Rust ä¸­ `char` çš„æœ¬è´¨æœ‰æ‰€å·®åˆ«ã€‚åœ¨ç¬¬ 8 ç« ä¸­çš„ [ç”¨å­—ç¬¦ä¸²å­˜å‚¨ UTF-8 ç¼–ç çš„æ–‡æœ¬](Ch08_Strings.md#storing-utf-8-encoded-text-with-strings) å°èŠ‚ï¼Œå°†å¯¹æ­¤è¯é¢˜è¿›è¡Œè®¨è®ºã€‚

## å¤åˆç±»å‹

*å¤åˆç±»å‹ï¼ˆcompound typesï¼‰* å¯å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚Rust æœ‰ç€ä¸¤ä¸ªåŸç”Ÿçš„å¤åˆç±»å‹ï¼šå…ƒç»„ä¸æ•°ç»„ï¼ˆtuples and arraysï¼‰ã€‚

### å…ƒç»„ç±»å‹

å…ƒç»„æ˜¯å°†æ•°ä¸ªä¸åŒç±»å‹çš„å€¼ï¼Œç»„åˆæˆä¸€ä¸ªå¤åˆç±»å‹çš„ä¸€èˆ¬æ–¹å¼ã€‚å…ƒç»„æ˜¯å›ºå®šé•¿åº¦çš„ï¼šä¸€æ—¦è¢«å£°æ˜å‡ºæ¥ï¼Œä»–ä»¬çš„å¤§å°å°±æ— æ³•æ‰©å¤§æˆ–ç¼©å°äº†ã€‚

é€šè¿‡ç¼–å†™æ”¾åœ¨åœ†æ‹¬å·é‡Œé¢çš„ã€é€—å·åˆ†éš”çš„å€¼æ¸…å•ï¼Œæ¥åˆ›å»ºå…ƒç»„ã€‚å…ƒç»„ä¸­æ¯ä¸ªä½ç½®éƒ½æœ‰ç€ä¸€ç§ç±»å‹ï¼ŒåŒæ—¶å…ƒç»„ä¸­ä¸åŒå€¼çš„ç±»å‹ä¸å¿…ä¸€è‡´ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒåŠ ä¸Šäº†é‚£äº›å¯é€‰çš„ç±»å‹æ³¨è§£ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
}
```

ç”±äºå…ƒç»„è¢«å½“ä½œæ˜¯å•ä¸€å¤åˆå…ƒç´ ï¼Œå› æ­¤è¿™é‡Œçš„å˜é‡ `tup` ç»‘å®šåˆ°äº†é‚£æ•´ä¸ªçš„å…ƒç»„ã€‚è¦ä»å…ƒç»„è·å–åˆ°å…¶å•ä¸ªå€¼ï¼Œå°±è¦ä½¿ç”¨æ¨¡å¼åŒ¹é…ï¼Œæ¥å¯¹å…ƒç»„å€¼è¿›è¡Œè§£æ„ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let tup = (500, 6.4, 1, "å…ƒç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ");

    let (x, y, z, a) = tup;

    println! ("a çš„å€¼ä¸ºï¼š{}", a);
}
```

è¿™ä¸ªç¨‹åºé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå…ƒç»„ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°äº†å˜é‡ `tup`ã€‚éšåä»¥ `let` å…³é”®å­—ï¼Œä½¿ç”¨äº†ä¸€ä¸ªæ¨¡å¼æ¥å–å¾— `tup`ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå››ä¸ªç‹¬ç«‹å˜é‡ï¼Œåˆ†åˆ«ä¸º `x`ã€`y`ã€`z` ä¸ `a`ã€‚ç”±äºè¯¥æ“ä½œå°†å•ä¸ªçš„å…ƒç´ ï¼Œæ‰“æ•£ä¸ºäº†å››ä¸ªéƒ¨åˆ†ï¼Œå› æ­¤ç§°ä¹‹ä¸º *è§£æ„ï¼ˆdestructuringï¼‰*ã€‚æœ€åï¼Œç¨‹åºæ‰“å°å‡ºäº† `a` çš„å€¼ï¼Œå³ä¸º `å…ƒç»„çš„æœ€åä¸€ä¸ªå…ƒç´ `ã€‚

è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨å¥ç‚¹ï¼ˆ`.`ï¼‰åå¸¦ä¸Šæƒ³è¦è®¿é—®å€¼çš„ç´¢å¼•ï¼Œè¿˜å¯ç›´æ¥å¯¹æŸä¸ªå…ƒç»„å…ƒç´ è¿›è¡Œè®¿é—®ã€‚æ¯”å¦‚ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let x = (500, 6.4, 1);

    let five_hundred = x.0;

    let six_point_four = x.1;

    let one = x.2;

    println! ("x.0ï¼š {}, x.1ï¼š{}, x.2ï¼š{}", five_hundred, six_point_four, one);
}
```

æ­¤ç¨‹åºåˆ›å»ºäº†å…ƒç»„ `x`ï¼Œå¹¶éšåé€šè¿‡ä½¿ç”¨å„ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œè€Œæ„é€ äº†ä»–ä»¬çš„æ–°å˜é‡ã€‚ä¸ç»å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œå…ƒç»„çš„é¦–ä¸ªç´¢å¼•ä¸º `0`ã€‚

æ²¡æœ‰ä»»ä½•å€¼çš„å…ƒç»„ï¼Œ`()`ï¼Œæ˜¯ç§ä»…æœ‰ä¸€ä¸ªå€¼çš„ç‰¹ä¿—ç±»å‹ï¼ŒåŒæ ·å†™ä½œ `()`ã€‚è¯¥ç±»å‹å«åš *å•å…ƒç±»å‹ï¼ˆunit typeï¼‰*ï¼ŒåŒæ—¶è¿™ä¸ªå€¼å«åš *å•å…ƒå€¼ï¼ˆunit valueï¼‰*ã€‚é‚£äº›ä¸è¿”å›ä»»ä½•å€¼çš„è¡¨è¾¾å¼ï¼Œå°±ä¼šæ˜¾å¼åœ°è¿”å›è¿™ä¸ªå•å…ƒå€¼ã€‚


### æ•°ç»„ç±»å‹

*æ•°ç»„ï¼ˆarrayï¼‰* æ˜¯æ‹¥æœ‰å¤šä¸ªå€¼é›†åˆçš„å¦ä¸€ç§æ–¹å¼ã€‚ä¸åŒäºå…ƒç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œéƒ½å¿…é¡»æ˜¯åŒä¸€ç±»å‹ã€‚ä¸å…¶ä»–ä¸€äº›è¯­è¨€ä¸­çš„æ•°ç»„ä¸åŒï¼ŒRust ä¸­çš„æ•°ç»„æ˜¯å®šé•¿çš„ã€‚

ä»¥æ–¹æ‹¬å·ï¼ˆ`[]`ï¼‰ä¸­é€—å·åˆ†éš”çš„æ–¹å¼ï¼Œæ¥ç¼–å†™æ•°ç»„ä¸­ä¸ªé‚£äº›å€¼ï¼š

æ–‡ä»¶ï¼š`src/main.rs`

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];
}
```

åœ¨å¸Œæœ›æ•°æ®åˆ†é…åœ¨æ ˆè€Œä¸æ˜¯å †ï¼ˆåœ¨ [ç¬¬ 4 ç« ](Ch04_Understanding_Ownership.md#what-is-ownership) å°†è¿›ä¸€æ­¥è®¨è®ºæ ˆä¸å †ï¼‰ä¸Šæ—¶ï¼Œæˆ–å¸Œæœ›ç¡®ä¿ä¸€ç›´æœ‰ç€å›ºå®šæ•°ç›®çš„å…ƒç´ æ—¶ï¼Œæ•°ç»„å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ç„¶è€Œï¼Œæ•°ç»„ä¸å¦‚çŸ¢é‡ç±»å‹çµæ´»ã€‚çŸ¢é‡æ˜¯æ ‡å‡†åº“æ‰€æä¾›çš„ï¼Œä¸€ç§ç±»ä¼¼çš„é›†åˆç±»å‹ï¼Œå…¶å¤§å° *å¯ä»¥* å˜å¤§æˆ–ç¼©å°ã€‚åœ¨ä¸ç¡®å®šè¦ä½¿ç”¨æ•°ç»„ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨çŸ¢é‡ç±»å‹æ—¶ï¼Œé‚£å¤šåŠå°±åº”è¯¥ä½¿ç”¨çŸ¢é‡äº†ã€‚[ç¬¬ 8 ç« ](Ch08_Common_Collections.md#vectors) å¯¹çŸ¢é‡ç±»å‹è¿›è¡Œäº†æ›´è¯¦ç»†çš„è®¨è®ºã€‚

å°½ç®¡å¦‚æ­¤ï¼Œåœ¨äº†è§£äº†å…ƒç´ æ•°ç›®æ— éœ€å˜åŒ–æ—¶ï¼Œæ•°ç»„å°†æ›´ä¸ºæœ‰ç”¨ã€‚æ¯”å¦‚ï¼Œåœ¨ç¨‹åºä¸­æ­£ä½¿ç”¨ç€å„ä¸ªæœˆä»½åå­—æ—¶ï¼Œç”±äºæ˜¯çŸ¥é“é‚£å°†æ€»æ˜¯åŒ…å« 12 ä¸ªå…ƒç´ ï¼Œå› æ­¤å°±è¦ä½¿ç”¨æ•°ç»„è€ŒéçŸ¢é‡ç±»å‹ï¼š

```rust
let months = ["January", "February", "March", "April", "May", "June", "July",
              "August", "September", "October", "November", "December"];
```

æ•°ç»„ç±»å‹çš„ç¼–å†™ï¼Œæ˜¯ä»¥æ–¹æ‹¬å¼§ï¼ˆ`[]`ï¼‰æ‹¬èµ·æ¥çš„ï¼Œå„ä¸ªå…ƒç´ çš„ç±»å‹ï¼Œä¸€ä¸ªåˆ†å·ï¼ˆ`;`ï¼‰ï¼Œå’Œæ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°çš„å½¢å¼ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š

```rust
let a: [i32, 5] = [-1, 0, 1, 2, 3];
```

è¿™é‡Œï¼Œ`i32`å°±æ˜¯å„ä¸ªå…ƒç´ çš„ç±»å‹ã€‚åœ¨åˆ†å·ä¹‹åï¼Œæ•°å­— `5` è¡¨ç¤ºè¯¥æ•°ç»„åŒ…å«äº”ä¸ªå…ƒç´ ã€‚

è¿˜å¯ä»¥é€šè¿‡åœ¨æ–¹æ‹¬å¼§ï¼ˆ`[]`ï¼‰ä¸­ï¼Œå…ˆæŒ‡å®šåˆå§‹å€¼ï¼Œæ¥ç€ä¸€ä¸ªåˆ†å·ï¼ˆ`;`ï¼‰ï¼ŒåŠéšåæ•°ç»„é•¿åº¦çš„æ–¹å¼ï¼Œåˆå§‹åŒ–å‡ºä¸€ä¸ªåŒ…å«å„ä¸ªå…ƒç´ ä¸ºåŒä¸€ä¸ªå€¼çš„æ•°ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
let a = [3; 5];
```

åå« `a` è¿™ä¸ªè¿™ä¸ªæ•°ç»„ï¼Œå°†åŒ…å« `5` ä¸ªå…ƒç´ éƒ½å°†è¢«åˆå§‹åŒ–è®¾ç½®ä¸ºå€¼ `3` çš„å…ƒç´ ã€‚è¿™ä¸ `let a = [3, 3, 3, 3, 3];` çš„å†™æ³•æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡æ˜¯ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼ã€‚

### å¯¹æ•°ç»„å…ƒç´ çš„è®¿é—®

ä¸€ä¸ªæ•°ç»„ï¼Œå³æ˜¯å¯åˆ†é…åœ¨æ ˆä¸Šçš„ã€å·²çŸ¥åŠå›ºå®šå¤§å°çš„ä¸€å—å†…å­˜ã€‚ä½¿ç”¨ç´¢å¼•ï¼Œå°±å¯ä»¥å¯¹æ•°ç»„çš„é‚£äº›å…ƒç´ è¿›è¡Œè®¿é—®ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];

    let first = a[0];
    let last = a[a.len()-1];

    println! ("æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š{}ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ï¼š{}", first, last);
}
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç”±äºå€¼ `1` ä¸ºè¯¥æ•°ç»„ä¸­ç´¢å¼•ä¸º `[0]` å¤„çš„å€¼ï¼Œå› æ­¤åä¸º `first` çš„å…ƒç´ å°†è·å–åˆ°å€¼ `1`ã€‚è€Œåä¸º `last` çš„å˜é‡ï¼Œå°†ä»æ•°ç»„ä¸­çš„ç´¢å¼• `[4]` è·å–åˆ°å€¼ `5`ã€‚

### æ— æ•ˆçš„æ•°ç»„å…ƒç´ è®¿é—®

ä¸‹æ¥æ¥çœ‹çœ‹ï¼Œåœ¨å°è¯•è®¿é—®è¶…å‡ºæ•°ç»„æœ«ç«¯çš„æ•°ç»„å…ƒç´ æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆã€‚å°±æ˜¯è¯´åœ¨è¿è¡Œä¸‹é¢è¿™ä¸ªç¨‹åºæ—¶ï¼Œä¸ç¬¬äºŒç« ä¸­çš„çŒœæ•°æ¸¸æˆç±»ä¼¼ï¼Œè¦ä»ç”¨æˆ·é‚£é‡Œè·å–åˆ°ä¸€ä¸ªæ•°ç»„ç´¢å¼•ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
use std::io;
use std::process;

fn main() {
    let a = [1, 2, 3, 4, 5];

    println! ("è¯·è¾“å…¥ä¸€ä¸ªæ•°ç»„ç´¢å¼•ã€‚");

    let mut index = String::new();

    io::stdin()
        .read_line(&mut index)
        .expect("è¯»å–è¡Œå¤±è´¥");

    let index: usize = match index.trim()
        .parse() {
            Ok(num) => num,
            Err(_) => { 
                println! ("è¾“å…¥çš„ç´¢å¼•å¹¶éæ•°å­—");
                process::exit(0);
            }
        };

    let element = a[index];

    println! (
        "ä½äºç´¢å¼• {} å¤„çš„å…ƒç´ å€¼ä¸ºï¼š{}",
        index, element);
}
```

æ­¤ä»£ç ä¼šæˆåŠŸç¼–è¯‘ã€‚è€Œåœ¨ä½¿ç”¨ `cargo run` è¿è¡Œæ­¤ä»£ç ï¼Œå¹¶è¾“å…¥ `0`ã€`1`ã€`2`ã€`3` æˆ– `4` æ—¶ï¼Œç¨‹åºå°†æ‰“å°å‡ºè¯¥æ•°ç»„ä¸­å¯¹åº”ä¸é‚£ä¸ªç´¢å¼•å¤„çš„å€¼ã€‚è€Œè‹¥è¾“å…¥äº†ä¸€ä¸ªè¶…å‡ºæ•°ç»„æœ«ç«¯çš„æ•°å­—ï¼Œæ¯”å¦‚ `10`ï¼Œé‚£ä¹ˆå°±ä¼šçœ‹åˆ°ä¸‹é¢è¿™æ ·çš„è¾“å‡ºï¼š

```console
thread 'main' panicked at 'index out of bounds: the len is 5 but the index is 10', src/main.rs:24:19
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
```

å½“åœ¨ç´¢å¼•æ“ä½œä¸­ä½¿ç”¨äº†æ— æ•ˆå€¼çš„æ—¶é—´ç‚¹ï¼Œè¯¥ç¨‹åºé€ æˆäº†ä¸€ä¸ª *è¿è¡Œæ—¶ï¼ˆruntimeï¼‰* é”™è¯¯ã€‚è¯¥ç¨‹åºä»¥ä¸€æ¡é”™è¯¯æ¶ˆæ¯é€€å‡ºï¼Œè€Œå¹¶æœªæ‰§è¡Œé‚£æœ€åçš„ `println!` è¯­å¥ã€‚åœ¨å°è¯•ä½¿ç”¨ç´¢å¼•è®¿é—®æŸä¸ªå…ƒç´ æ—¶ï¼ŒRust ä¼šå°±æ‰€æŒ‡å®šçš„ç´¢å¼•ï¼Œå°äºæ•°ç»„é•¿åº¦è¿›è¡Œæ£€æŸ¥ã€‚è‹¥è¯¥ç´¢å¼•å¤§äºæˆ–ç­‰äºæ•°ç»„é•¿åº¦ï¼ŒRust å°±ä¼šå‡ºé”™ã€‚æ­¤é¡¹æ£€æŸ¥å¿…é¡»è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œï¼Œå°¤å…¶æ˜¯åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨å‡ æ— å¯èƒ½çŸ¥é“åœ¨ç”¨æˆ·éšåè¿è¡Œæ­¤ç¨‹åºæ—¶ï¼Œä¼šè¾“å…¥ä»€ä¹ˆæ ·çš„å€¼ã€‚

è¿™æ˜¯ Rust å†…å­˜å®‰å…¨å‡†åˆ™çš„ä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„ç¤ºä¾‹ã€‚åœ¨è®¸å¤šåº•å±‚è¯­è¨€ä¸­ï¼Œæ­¤ç§æ£€æŸ¥éƒ½æœªå®ç°ï¼Œè¿›è€Œåœ¨æä¾›äº†ä¸æ­£ç¡®çš„ç´¢å¼•æ—¶ï¼Œå°±ä¼šè®¿é—®åˆ°æ— æ•ˆçš„å†…å­˜ã€‚Rust é€šè¿‡ç«‹å³é€€å‡ºè€Œä¸æ˜¯å…è®¸è¿™ç§æ— æ•ˆå†…å­˜è®¿é—®å¹¶ç»§ç»­è¿è¡Œï¼Œè€Œä¿æŠ¤å…äºæ­¤ç±»é”™è¯¯ã€‚ç¬¬ 9 ç« å°†å¯¹ Rust çš„é”™è¯¯å¤„ç†è¿›è¡Œè¿‡å¤šçš„è®¨è®ºã€‚

## å‡½æ•°

å‡½æ•°éå¸ƒäº Rust ä»£ç ä¸­ã€‚è€Œé‚£ä¸ªè¿™é—¨è¯­è¨€ä¸­æœ€é‡è¦å‡½æ•°ä¹‹ä¸€ï¼š`main` å‡½æ•°ï¼Œä¹Ÿä¸€æ—©å°±è§åˆ°è¿‡äº†ï¼Œ`main` å‡½æ•°å¯æ˜¯è®¸å¤šç¨‹åºçš„å…¥å£ç‚¹ã€‚é€šè¿‡é‚£ä¸ªè¿˜å·²è§åˆ°è¿‡çš„ `fn` å…³é”®å­—ï¼Œå°±å¯ä»¥å£°æ˜å‡ºæ–°çš„å‡½æ•°æ¥ã€‚

Rust ä»£ç ä½¿ç”¨ *è›‡å½¢å‘½åæ³•ï¼ˆsnake caseï¼‰*ï¼Œä½œä¸ºå‡½æ•°ä¸å˜é‡å‘½åçš„çº¦å®šæ ·å¼ï¼Œä»¥è¿™ç§å‘½åæ³•ï¼Œå‡½æ•°åŠå˜é‡åç§°ä¸­çš„å…¨éƒ¨å­—æ¯éƒ½æ˜¯å°å†™çš„ï¼ŒåŒæ—¶ç”¨ä¸‹åˆ’çº¿æ¥åˆ†éš”å•è¯ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªåŒ…å«äº†ç¤ºä¾‹å‡½æ•°å®šä¹‰çš„ç¨‹åºï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    println!("Hello, world!");

    another_function();
}

fn another_function() {
    println! ("å¦ä¸€å‡½æ•°ã€‚");
}
```

è¿™é‡Œé€šè¿‡æ•²å…¥ `fn` å…³é”®å­—ï¼Œæ¥ç€çš„æ˜¯å‡½æ•°åå­—ï¼Œä»¥åŠä¸€å¥—åœ†æ‹¬å·ï¼ˆ`()`ï¼‰ï¼Œå®šä¹‰å‡ºäº†ä¸€ä¸ªå‡½æ•°ã€‚è€Œé‚£ä¸€å¯¹èŠ±æ‹¬å¼§ï¼ˆ`{}`ï¼‰ï¼Œåˆ™å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå‡½æ•°ä½“åœ¨å“ªé‡Œå¼€å§‹å’Œç»“æŸã€‚

é€šè¿‡æ•²å…¥å‡½æ•°åå­—ï¼Œæ¥ä¸Šä¸€å¯¹åœ†æ‹¬å·ï¼ˆ`()`ï¼‰ï¼Œå°±å¯ä»¥å¯¹å·²å®šä¹‰å¥½çš„å‡½æ•°è¿›è¡Œè°ƒç”¨ã€‚ç”±äº `another_function` åœ¨ç¨‹åºä¸­å®šä¹‰è¿‡ï¼Œå› æ­¤å°±å¯ä»¥åœ¨ `main` å‡½æ•°é‡Œå¤´å¯¹å…¶è°ƒç”¨ã€‚è¯·æ³¨æ„åœ¨æºä»£ç ä¸­ï¼Œæ˜¯åœ¨ `main` å‡½æ•° *ä¹‹å* å®šä¹‰çš„ `another_function`ï¼›åŸæœ¬ä¹Ÿå¯ä»¥åœ¨ `main` å‡½æ•°ä¹‹å‰å®šä¹‰ä»–ã€‚Rust ä¸ä¼šå…³å¿ƒåœ¨ä½•å¤„å®šä¹‰å‡½æ•°ï¼Œåªè¦ä»–ä»¬åœ¨æŸå¤„æœ‰å®šä¹‰å³å¯ã€‚

ä¸ºè¿›ä¸€æ­¥å¯¹ Rust çš„å‡½æ•°åŠ ä»¥æ¢ç´¢ï¼Œå°±æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„åä¸º `functions` çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œé¡¹ç›®ã€‚å°†è¿™ä¸ª `another_function` ç¤ºä¾‹æ”¾åœ¨ `src/main.rs` ä¸­å¹¶è¿è¡Œã€‚å°±ä¼šçœ‹åˆ°å¦‚ä¸‹çš„è¾“å‡ºï¼š

```console
$ cargo run
   Compiling functions v0.1.0 (/home/peng/rust-lang/projects/functions)
    Finished dev [unoptimized + debuginfo] target(s) in 0.32s
     Running `target/debug/functions`
Hello, world!
å¦ä¸€å‡½æ•°ã€‚
``` 

> æ³¨ï¼šäºŒè¿›åˆ¶é¡¹ç›®ï¼ˆa binary projectï¼‰ï¼Œæ˜¯ä¸åº“æºä»£ç é¡¹ç›®ç›¸å¯¹åº”çš„ï¼Œå¯ç”ŸæˆäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºçš„é¡¹ç›®ã€‚

è¿™äº›ä»£ç è¡Œï¼Œæ˜¯ä»¥ä»–ä»¬å‡ºç°åœ¨ `main` å‡½æ•°ä¸­çš„é¡ºåºæ‰§è¡Œçš„ã€‚é¦–å…ˆæ‰“å°å‡ºçš„æ˜¯ `Hello, world!` æ¶ˆæ¯ï¼Œè€Œéšå `another_function` å°±è¢«è°ƒç”¨äº†ï¼ŒåŒæ—¶ä»–çš„æ¶ˆæ¯è¢«æ‰“å°å‡ºæ¥ã€‚

### å‚æ•°

å¯å°†å‡½æ•°å®šä¹‰ä¸ºæœ‰ *å‚æ•°ï¼ˆparametersï¼‰*ï¼Œæ‰€è°“å‚æ•°ï¼Œå°±æ˜¯ä½œä¸ºå‡½æ•°ç­¾åä¸€éƒ¨åˆ†çš„ä¸€äº›ç‰¹æ®Šå˜é‡ï¼ˆwhich are special variables that are part of a function's signatureï¼‰ã€‚åœ¨å‡½æ•°æœ‰ç€å‚æ•°æ—¶ï¼Œå°±å¯ä»¥æä¾›åˆ°å‡½æ•°ä¸è¿™äº›å‚æ•°å¯¹åº”çš„å…·ä½“å€¼ã€‚æŠ€æœ¯ä¸Šè®²ï¼Œæä¾›åˆ°å‡½æ•°çš„å…·ä½“å€¼å«åš *å®å‚ï¼ˆargumentsï¼‰*ï¼Œä¸è¿‡åœ¨ä¸€èˆ¬èŠå¤©ä¸­ï¼Œäººä»¬ä¼šå°† *å½¢å‚ï¼ˆparametersï¼‰* ä¸ *å®å‚ï¼ˆargumentsï¼‰* ä¸¤ä¸ªè¯´æ³•äº’æ¢ä½¿ç”¨ï¼Œæ—¢æŒ‡å‡½æ•°å®šä¹‰ä¸­çš„å˜é‡ï¼Œåˆè¡¨ç¤ºè°ƒç”¨å‡½æ•°æ—¶æ‰€ä¼ å…¥çš„å…·ä½“å€¼ã€‚

åœ¨ä¸‹é¢è¿™ä¸ªç‰ˆæœ¬çš„ `another_function` ä¸­ï¼Œå°±è¦æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    another_function(-5);
}

fn another_function(x: i32) {
    println! ("x çš„å€¼ä¸ºï¼š{}", x);
}
```

è¯•ç€è¿è¡Œè¿™ä¸ªç¨‹åºï¼›å°±ä¼šå¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```console
$ cargo run                                                       î‚² âœ” 
   Compiling functions v0.1.0 (/home/peng/rust-lang/projects/functions)
    Finished dev [unoptimized + debuginfo] target(s) in 0.48s
     Running `target/debug/functions`
x çš„å€¼ä¸ºï¼š-5
```

`another_function` çš„å£°æ˜ï¼Œæœ‰ç€ä¸€ä¸ªåä¸º `x` çš„å‚æ•°ã€‚`x` çš„ç±»å‹è¢«æŒ‡å®šä¸º `i32`ã€‚åœ¨å°† `-5` ä¼ å…¥åˆ° `another_function` æ—¶ï¼Œé‚£ä¸ª `println!` çš„å®ï¼Œå°±å°† `-5` æ”¾åœ¨é‚£ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­ä¸¤ä¸ªèŠ±æ‹¬å·æ‰€åœ¨çš„åœ°æ–¹ã€‚

åœ¨å‡½æ•°ç­¾åä¸­ï¼Œ*å¿…é¡»* å£°æ˜å„ä¸ªå‚æ•°çš„ç±»å‹ã€‚è¿™æ˜¯ Rust è®¾è®¡ä¸­æ·±æ€ç†Ÿè™‘çš„å†³å®šï¼šåœ¨å‡½æ•°å®šä¹‰ä¸­è¦æ±‚ç±»å‹æ³¨è§£ï¼Œå°±æ„å‘³ç€ç¼–è¯‘å™¨å‡ è¿‘æ— éœ€åœ¨ä»£ç ä¸­çš„ä»€ä¹ˆåœ°æ–¹ä½¿ç”¨é‚£äº›å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œå°±èƒ½ææ¸…æ¥šæ˜¯è¦ä½•ç§ç±»å‹ï¼ˆrequiring type annotations in function definitions means that the compiler almost never needs you to use them elsewhere in the code to figure out what type you meanï¼‰ã€‚

åœ¨å®šä¹‰å¤šä¸ªå‚æ•°æ—¶ï¼Œè¦ç”¨é€—å·ï¼ˆ`,`ï¼‰å°†é‚£äº›å‚æ•°å£°æ˜åˆ†éš”å¼€ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    print_labeled_measurement(5, 'h');
}

fn print_labeled_measurement(value: i32, unit_label: char) {
    println! ("åº¦é‡å€¼ä¸ºï¼š{}{}", value, unit_label);
}
```

æ­¤ç¤ºä¾‹åˆ›å»ºäº†ä¸€ä¸ªåä¸º `print_labeled_measurement`çš„ã€æœ‰ä¸¤ä¸ªå‚æ•°çš„æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ªå‚æ•°åä¸º `value`ï¼Œä¸”ç±»å‹ä¸º `i32`ã€‚ç¬¬äºŒä¸ªåä¸º `unit_label`ï¼ŒåŒæ—¶ç±»å‹ä¸º `char`ã€‚è¯¥å‡½æ•°éšåä¼šæ‰“å°å‡ºåŒæ—¶åŒ…å« `value` ä¸ `unit_label` çš„æ–‡æœ¬ã€‚

æ¥å°è¯•è¿è¡Œæ­¤ä»£ç ã€‚å°†`functions` é¡¹ç›®ä¸­çš„ `src/main.rs` ä¸­çš„å½“å‰ç¨‹åºï¼Œç”¨ä¸Šé¢çš„ç¤ºä¾‹è¿›è¡Œæ›¿æ¢ï¼Œå¹¶ä½¿ç”¨ `cargo run` è¿è¡Œå½“å‰ç¨‹åºï¼š

```console
$ cargo run                                                       î‚² âœ” 
   Compiling functions v0.1.0 (/home/peng/rust-lang/projects/functions)
    Finished dev [unoptimized + debuginfo] target(s) in 0.45s
     Running `target/debug/functions`
åº¦é‡å€¼ä¸ºï¼š5h
```

ç”±äºè¿™é‡Œä»¥ `5` ä½œä¸º `value` çš„å€¼ï¼Œä»¥ `h` ä½œä¸º `unit_label` çš„å€¼ï¼Œè°ƒç”¨äº†è¿™ä¸ªå‡½æ•°ï¼Œå› æ­¤è¯¥ç¨‹åºçš„è¾“å‡ºï¼Œå°±åŒ…å«äº†è¿™äº›å€¼ã€‚

### è¯­å¥åŠè¡¨è¾¾å¼

å‡½æ•°ä½“æ˜¯ç”±ä¸€ç³»åˆ—è¯­å¥æ„æˆï¼Œè¿™äº›è¯­å¥å¯ä»¥æ˜¯è¡¨è¾¾å¼ç»“æŸçš„ï¼Œä¹Ÿå¯ä»¥ä¸æ˜¯ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‰€è®²åˆ°çš„å‡½æ•°ï¼Œéƒ½æ²¡æœ‰åŒ…å«è¯­å¥ä»¥è¡¨è¾¾å¼ç»“æŸï¼Œä¸è¿‡æœ‰è§åˆ°è¿‡è¡¨è¾¾å¼ä½œä¸ºè¯­å¥ä¸€éƒ¨åˆ†çš„æƒ…å†µã€‚ç”±äº Rust æ˜¯åŸºäºè¡¨è¾¾å¼çš„è¯­è¨€ï¼Œé‚£ä¹ˆè¿™ä¸€ç‚¹å°±å¾ˆé‡è¦ï¼Œæ˜¯è¦æŒæ¡çš„ç‰¹å¾ã€‚å…¶ä»–è¯­è¨€å¹¶æ— è¿™åŒæ ·çš„ç‰¹å¾ï¼Œå› æ­¤æ¥ä¸‹æ¥å°±è¦çœ‹çœ‹è¯­å¥å’Œè¡¨è¾¾å¼ç©¶ç«Ÿæ˜¯ä½•ç‰©ï¼Œä»¥åŠä»–ä»¬å¯¹å‡½æ•°ä½“å½±å“çš„ä¸åŒã€‚

*è¯­å¥ï¼ˆstatementsï¼‰* æ˜¯ä¸€äº›å®ŒæˆæŸäº›æ“ä½œè€Œä¸è¿”å›å€¼çš„æŒ‡ä»¤ã€‚ *è¡¨è¾¾å¼ï¼ˆexpressionsï¼‰* ä¼šæ±‚å¾—ä¸€ä¸ªç»“æœå€¼ã€‚æ¥çœ‹çœ‹ä¸€äº›ç¤ºä¾‹ã€‚

è¿™é‡Œäº‹å®ä¸Šå·²ç»ç”¨åˆ°äº†è¯­å¥å’Œè¡¨è¾¾å¼ã€‚åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œå¹¶ä»¥ `let` å…³é”®å­—å°†ä¸€ä¸ªå€¼æŒ‡æ´¾ç»™ä»–ï¼Œå°±æ˜¯ä¸€æ¡è¯­å¥ã€‚ä¸‹é¢çš„æ¸…å• 3-1 ä¸­ï¼Œ`let y = 6;` å°±æ˜¯ä¸€æ¡è¯­å¥ã€‚

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let y = 6;
}
```

*æ¸…å• 3-1ï¼šåŒ…å«ä¸€æ¡è¯­å¥çš„ä¸€ä¸ª `main` å‡½æ•°*

å‡½æ•°å®šä¹‰ä¹Ÿæ˜¯è¯­å¥ï¼›ä¸Šé¢çš„æ•´ä¸ªç¤ºä¾‹æœ¬èº«å°±æ˜¯ä¸€æ¡è¯­å¥ã€‚

è¯­å¥ä¸ä¼šè¿”å›å€¼ã€‚å› æ­¤å°±æ— æ³•å°†ä¸€æ¡ `let` è¯­å¥ï¼ŒæŒ‡æ´¾ç»™å¦ä¸€å˜é‡äº†ï¼Œå°±å¦‚åŒä¸‹é¢ä»£ç å°è¯•å®Œæˆçš„é‚£æ ·ï¼›è¿™å°±ä¼šå¾—åˆ°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let x = (let y = 6);
}
```

å½“è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼Œå°†æ”¶åˆ°çš„é”™è¯¯å¦‚ä¸‹æ‰€ç¤ºï¼š

```console
$ cargo run                                                       î‚² âœ” 
   Compiling functions v0.1.0 (/home/peng/rust-lang/projects/functions)
error: expected expression, found statement (`let`)
 --> src/main.rs:2:14
  |
2 |     let x = (let y = 6);
  |              ^^^^^^^^^
  |
  = note: variable declaration using `let` is a statement

error[E0658]: `let` expressions in this position are unstable
 --> src/main.rs:2:14
  |
2 |     let x = (let y = 6);
  |              ^^^^^^^^^
  |
  = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information

warning: unnecessary parentheses around assigned value
 --> src/main.rs:2:13
  |
2 |     let x = (let y = 6);
  |             ^         ^
  |
  = note: `#[warn(unused_parens)]` on by default
help: remove these parentheses
  |
2 -     let x = (let y = 6);
2 +     let x = let y = 6;
  | 

For more information about this error, try `rustc --explain E0658`.
warning: `functions` (bin "functions") generated 1 warning
error: could not compile `functions` due to 2 previous errors; 1 warning emitted
```

å…¶ä¸­çš„ `let y = 6` è¯­å¥ä¸ä¼šè¿”å›å€¼ï¼Œå› æ­¤è¿™é‡Œå°±æ²¡æœ‰ä»»ä½•ä¸œè¥¿ç»™ `x` ç»‘å®šã€‚è¿™ä¸åŒäºå…¶ä»–è¯­è¨€æ‰€å‘ç”Ÿçš„äº‹æƒ…ï¼Œè­¬å¦‚ C å’Œ Ruby ç­‰ï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œèµ‹å€¼æ“ä½œè¿”å›çš„æ˜¯æ‰€èµ‹çš„é‚£ä¸ªå€¼ã€‚åœ¨é‚£äº›è¯­è¨€ä¸­ï¼Œå°±å¯ä»¥å†™ä¸‹ `x = y = 6`ï¼Œè€Œè®© `x` ä¸ `y` åŒæ—¶æœ‰äº†å€¼ `6`ï¼›ä½†åœ¨ Rust ä¸­å´ä¸æ˜¯è¿™æ ·çš„ã€‚

è¡¨è¾¾å¼ä¼šæ±‚è§£ä¸ºä¸€ä¸ªå€¼ï¼Œè¿›è€Œæ„æˆå¾€åç¼–å†™çš„ Rust ä»£ç çš„ç»å¤§éƒ¨åˆ†ã€‚è®¾æƒ³ä¸€ä¸ªæ•°å­¦è¿ç®—ï¼Œæ¯”å¦‚ `5 + 6`ï¼Œè¿™å°±æ˜¯ä¸ªå°†æ±‚å€¼ä¸ºå€¼ `11` çš„è¡¨è¾¾å¼ã€‚

è¡¨è¾¾å¼å¯ä½œä¸ºè¯­å¥çš„ä¸€éƒ¨åˆ†ï¼šåœ¨æ¸…å• 3-1 ä¸­ï¼Œè¯­å¥ `let y = 6;` é‡Œçš„ `6` å°±æ˜¯ä¸€ä¸ªæ±‚å€¼åˆ° `6` çš„è¡¨è¾¾å¼ã€‚å¯¹å‡½æ•°çš„è°ƒç”¨ï¼ŒåŒæ ·æ˜¯ä¸ªè¡¨è¾¾å¼ã€‚å¯¹å®çš„è°ƒç”¨ï¼Œä¹Ÿæ˜¯ä¸ªè¡¨è¾¾å¼ã€‚ä»¥èŠ±æ‹¬å·åˆ›å»ºå‡ºçš„æ–°ä»£ç å—ï¼Œè¿˜æ˜¯ä¸ªè¡¨è¾¾å¼ï¼Œæ¯”å¦‚ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let y = {
        let x = 3;
        x + 1
    };

    println! ("y çš„å€¼ä¸ºï¼š{}", y);
}
```

å…¶ä¸­çš„è¿™ä¸ªè¡¨è¾¾å¼ï¼š

 ```rust
{
    let x = 3;
    x + 1
}
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå°±æ˜¯ä¸€ä¸ªæ±‚å€¼ä¸º `4` çš„è¡¨è¾¾å¼ã€‚å…¶æ±‚å¾—çš„å€¼ `4` ä¼šä½œä¸ºé‚£æ¡ `let` è¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œè¢«ç»‘å®šåˆ° `y`ã€‚è¯·æ³¨æ„é‚£ä»£ç å—æœ€åçš„ `x + 1` çš„ä»£ç è¡Œï¼Œå¹¶æ²¡æœ‰åˆ†å·ï¼ˆ`;`ï¼‰ï¼Œè€Œä¸åˆ°ç›®å‰ä¸ºæ­¢æ‰€è§åˆ°çš„å¤§å¤šæ•°ä»£ç è¡Œä¸åŒã€‚è¡¨è¾¾å¼å¹¶ä¸åŒ…å«æœ€åçš„åˆ†å·ã€‚è‹¥å°†åˆ†å·å®¶åˆ°è¡¨è¾¾å¼æœ«ç«¯ï¼Œå°±ä¼šå°†å…¶å˜æˆä¸€æ¡è¯­å¥ï¼Œè¿›è€Œå°±ä¸å†è¿”å›å€¼äº†ã€‚åœ¨æ¥ä¸‹æ¥å¯¹å‡½æ•°è¿”å›å€¼ä¸è¡¨è¾¾å¼çš„æ¢ç´¢è¿‡ç¨‹ä¸­ï¼Œè¯·ç‰¢è®°è¿™ä¸€ç‚¹ã€‚

> æ³¨ï¼šè‹¥åœ¨ä¸Šé¢ä»£ç å—ä¸­çš„ `x + 1` åé¢åŠ ä¸Šåˆ†å·ï¼Œé‚£ä¹ˆ `y` çš„å€¼å°†ä¸º `()` è¿™ä¸€ç‰¹æ®Šå€¼ï¼ˆç±»ä¼¼äº `null`ï¼‰ã€‚è¿›è€Œåœ¨æ¥ä¸‹æ¥çš„ `println!` è¯­å¥ä¸­å¯¼è‡´å‡ºé”™ã€‚


### æœ‰è¿”å›å€¼çš„å‡½æ•°

å‡½æ•°å¯ä»¥å°†å€¼è¿”å›ç»™è°ƒç”¨ä»–ä»¬çš„ä»£ç ã€‚åœ¨å‡½æ•°æœ‰å€¼è¦è¿”å›æ—¶ï¼Œä¸ä¼šå°±è¿™äº›è¿”å›å€¼å‘½åï¼Œä½†å¿…é¡»åœ¨ç®­å¤´ï¼ˆ`->`ï¼‰åé¢ï¼Œå£°æ˜è¿™äº›å€¼çš„ç±»å‹ã€‚åœ¨ Rust ä¸­ï¼Œå‡½æ•°çš„è¿”å›å€¼ï¼Œä¸å‡½æ•°ä½“ä»£ç å—çš„æœ€åé‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼ŒäºŒè€…ç­‰ä»·ã€‚é€šè¿‡ä½¿ç”¨ `return` å…³é”®å­—å¹¶æŒ‡å®šä¸€ä¸ªå€¼ï¼Œå³å¯å°½æ—©åœ°ç»™å‡½æ•°è¿”å›å€¼ï¼Œä¸è¿‡å¤§å¤šæ•°å‡½æ•°ï¼Œéƒ½æ˜¾å¼åœ°è¿”å›æœ€åçš„é‚£ä¸ªè¡¨è¾¾å¼ã€‚ä¸‹é¢å°±æ˜¯è¿”å›å€¼çš„ä¸€ä¸ªå‡½æ•°ç¤ºä¾‹ï¼š

> æ³¨ï¼šå…³é”®å­— `return` çš„ä½¿ç”¨ï¼Œæ ‡å¿—ç€å‡½æ•°ä½“çš„ç»“æŸï¼Œ`return` è¯­å¥ä¹‹åçš„ä»£ç ï¼Œå°†ä¸å†æ‰§è¡Œã€‚

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn five() -> u32 {
    5
}

fn main() {
    let x = five();

    println! ("x çš„å€¼ä¸ºï¼š{}", x);
}
```

åœ¨é‚£ä¸ª `five` å‡½æ•°ä¸­ï¼Œæ²¡æœ‰ä»»ä½•å‡½æ•°è°ƒç”¨ã€å®ã€æˆ–è€…ç”šè‡³ `let` è¯­å¥ -- åªæ˜¯é‚£ä¸ªæ•°å­— `5` è‡ªå·±ã€‚åœ¨ Rust ä¸­è¿™æ˜¯ä¸ªå®Œå…¨æœ‰æ•ˆçš„å‡½æ•°ã€‚è¯·æ³¨æ„è¯¥å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿæ˜¯ä»¥ `-> u32` çš„å½¢å¼æŒ‡å®šäº†çš„ã€‚å°è¯•è¿è¡Œæ­¤ä»£ç ï¼›è¾“å‡ºåº”åƒä¸‹é¢è¿™æ ·ï¼š

```console
$ cargo run                                                       î‚² âœ” 
   Compiling functions v0.1.0 (/home/peng/rust-lang/projects/functions)
    Finished dev [unoptimized + debuginfo] target(s) in 0.45s
     Running `target/debug/functions`
x çš„å€¼ä¸ºï¼š5
```

å‡½æ•° `five` ä¸­çš„ `5` å³æ˜¯è¯¥å‡½æ•°çš„è¿”å›å€¼ï¼Œè¿™å°±æ˜¯ä¸ºä½•è¿”å›å€¼ç±»å‹ä¸º `u32` çš„åŸå› ã€‚ä¸‹é¢æ¥æ›´æ·±å…¥åœ°æ£€è§†ä¸€ä¸‹ã€‚å…¶ä¸­æœ‰ä¸¤ä¸ªé‡ç‚¹ï¼šé¦–å…ˆï¼Œä»£ç è¡Œ`let x = five();` è¡¨æ˜è¿™é‡Œä½¿ç”¨äº†æŸä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œæ¥å¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œåˆå§‹åŒ–ã€‚ç”±äºå‡½æ•° `five` è¿”å›äº†ä¸€ä¸ª `5`ï¼Œå› æ­¤é‚£è¡Œä»£ç å°±è·Ÿä¸‹é¢çš„ç›¸åŒï¼š

```rust
let x = 5;
```

å…¶æ¬¡ï¼Œå‡½æ•° `five` æ²¡æœ‰å‚æ•°ï¼Œå¹¶å®šä¹‰äº†è¿”å›å€¼ç±»å‹ï¼Œè€Œå…¶å‡½æ•°ä½“åªæ˜¯ä¸ªå­¤é›¶é›¶çš„ã€ä¸å¸¦åˆ†å·çš„ `5`ï¼Œè¿™æ˜¯ç”±äºè¿™ä¸ªä¸å¸¦åˆ†å·çš„ `5`ï¼Œæ˜¯ä¸ªè¦å°†å…¶å€¼åŠ ä»¥è¿”å›çš„è¡¨è¾¾å¼ï¼ˆæ³¨ï¼šè‹¥åŠ ä¸Šåˆ†å·ï¼Œé‚£ä¹ˆå°±ä¼šå˜æˆä¸€ä¸ªè¯­å¥ï¼Œè¿”å›çš„å°†æ˜¯ç‰¹æ®Šå€¼ `()`ï¼Œè¿”å›å€¼ç±»å‹å°†ä¸å†æ˜¯ `u32`ï¼Œä»è€Œå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯......ï¼‰ã€‚

ä¸‹é¢æ¥çœ‹çœ‹å¦ä¸€ä¸ªç¤ºä¾‹ï¼š

æ–‡ä»¶åï¼š`src/main.rs`

```rust
fn main() {
    let x = plus_one(-1);

    println! ("x çš„å€¼ä¸ºï¼š{}", x);
}

fn plus_one(x: i32) -> i32 {
    x + 1;
}
```

å¯¹è¿™æ®µä»£ç è¿›è¡Œç¼–è¯‘ï¼Œä¼šäº§ç”Ÿä¸€æ¡é”™è¯¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```console
$ cargo run                                                       î‚² âœ” 
   Compiling functions v0.1.0 (/home/peng/rust-lang/projects/functions)
error[E0308]: mismatched types
 --> src/main.rs:7:24
  |
7 | fn plus_one(x: i32) -> i32 {
  |    --------            ^^^ expected `i32`, found `()`
  |    |
  |    implicitly returns `()` as its body has no tail or `return` expression
8 |     x + 1;
  |          - help: consider removing this semicolon

For more information about this error, try `rustc --explain E0308`.
error: could not compile `functions` due to previous error
```

ä¸»è¦é”™è¯¯æ¶ˆæ¯ä¸ºï¼Œâ€œmismatched typesï¼Œâ€ï¼Œè¯¥æ¶ˆæ¯è¡¨æ˜äº†æ­¤ä»£ç çš„æ ¸å¿ƒé—®é¢˜ã€‚å‡½æ•° `plus_one` çš„å®šä¹‰æ˜¯è¯´ä»–å°†è¿”å›ä¸€ä¸ª `i32`ï¼Œç„¶è€Œå‡½æ•°ä½“çš„è¯­å¥å¹¶æœªæ±‚è§£åˆ°ä¸€ä¸ªå€¼æ¥ï¼Œæ±‚è§£åˆ°çš„æ˜¯ä¸€ä¸ªä»¥ `()` è¡¨ç¤ºçš„å•å…ƒç±»å‹ï¼ˆthe unit typeï¼‰ã€‚å› æ­¤ï¼Œå°±ä»€ä¹ˆä¹Ÿæ²¡è¿”å›ï¼Œè¿™æ˜¯ä¸å‡½æ•°å®šä¹‰ç›¸çŸ›ç›¾çš„ï¼Œè¿›è€Œå¯¼è‡´äº†ä¸€ä¸ªé”™è¯¯ã€‚åœ¨æ­¤è¾“å‡ºä¸­ï¼ŒRust æä¾›äº†ä¸€æ¡æˆ–è®¸æœ‰åŠ©äºçº æ­£æ­¤é—®é¢˜çš„æ¶ˆæ¯ï¼šä»–å»ºè®®ç§»é™¤é‚£ä¸ªåˆ†å·ï¼Œé‚£æ ·å°±ä¼šä¿®æ­£è¯¥é”™è¯¯ã€‚

## æ³¨é‡Š


